{"version":3,"sources":["utils/fetch.js","contexts/AuthContext.js","contexts/SocketContext.js","hooks/useSocket.js","types/index.js","types/ui.js","types/design.js","contexts/ui/uiReducer.js","contexts/ui/UiContext.js","assets/img/Logo.png","hooks/useForm.js","components/ModalFormWithImage.js","pages/LandingPage/LoginModal.js","pages/LandingPage/RegisterModal.js","pages/LandingPage/LandingPage.js","router/PublicRoute.js","router/PrivateRoute.js","utils/textFormatters.js","services/DesignService.js","components/Design.js","components/DesignsContainer.js","services/FolderService.js","components/DesignsFolder.js","components/FoldersContainer.js","pages/Navigation/LeftPanel.js","pages/Navigation/MyDesigns/DesignsBreadcrumbs.js","components/DesignSkeleton.js","pages/Navigation/MyDesigns/RecentDesigns.js","pages/Navigation/MyDesigns/FolderModal.js","pages/Navigation/MyDesigns/MyDesignsPage.js","services/UserService.js","pages/User/UserProfile/EditProfileModal.js","components/UserCard.js","pages/User/UserProfile/ShowContactsModal.js","pages/User/UserProfile/UserProfile.js","contexts/UserConfigContext.js","theme/theme.js","components/NavBar.js","components/Footer.js","pages/Navigation/SharedWithMe/SharedWithMePage.js","pages/Navigation/PublicRepository/PublicRepositoryPage.js","pages/User/SearchUsersPage/SearchUsersPage.js","contexts/design/designReducer.js","contexts/design/DesignContext.js","contexts/SharedDocContext.js","components/PlaceHolder.js","components/SharedTextFieldTipTapEditor.js","pages/DesignPage/Workspace/Task.js","components/StackedBar.js","assets/resource/items.js","pages/DesignPage/Workspace/LearningActivity.js","components/PieGraphic.js","pages/DesignPage/Workspace/ShareModal.js","pages/DesignPage/Workspace/DesignWorkspace.js","utils/timeFormatters.js","services/CategoryService.js","pages/DesignPage/Metadata/LearningResult.js","pages/DesignPage/Metadata/BloomPiramid.js","pages/DesignPage/Metadata/BloomVerbList.js","pages/DesignPage/Metadata/LearningResultModal.js","pages/DesignPage/Metadata/DesignMetadata.js","components/TabPanel.js","services/BloomService.js","pages/DesignPage/DesignPage.js","components/ConfirmationModal.js","router/AppRouter.js","App.js","index.js"],"names":["baseUrl","process","fetchWithoutToken","endpoint","data","a","method","url","fetch","resp","json","headers","body","JSON","stringify","fetchWithToken","token","localStorage","getItem","AuthContext","createContext","useAuthState","context","useContext","undefined","Error","initialState","checking","user","AuthProvider","children","useState","authState","setAuthState","login","email","password","ok","register","userData","verifyToken","useCallback","setItem","useEffect","removeItem","Provider","value","logout","SocketContext","useSocketState","SocketProvider","serverPath","socket","setSocket","online","setOnline","connectSocket","tempSocket","io","connect","transports","autoConnect","forceNew","query","disconnectSocket","disconnect","connected","on","useSocket","types","ui","toggleLoginModal","toggleModal","toggleRegisterModal","toggleLearningResultModal","updateFolderPath","toggleConfirmAction","setFolder","setConfirmData","design","updateDesign","changeMetadataField","changeTaskField","setCurrentLearningResultField","clearCurrentLearningResult","setCurrentLearningResult","setBloomCategories","setBloomVerbs","setDesignPrivileges","uiReducer","state","action","type","payload","isRegisterModalOpen","folderPath","toggleWitchOpenModal","setWitchOpenModal","folder","confirmModalData","UiContext","useUiState","isLoginModalOpen","isLearningResultModalOpen","isEditProfileModalOpen","isContactsModalOpen","isConfirmationModalOpen","isOtherConfirmationModalOpen","isShareOpenModal","setWichOpenModal","isFolderModalOpen","_id","name","args","actionMutation","UiProvider","useReducer","uiState","dispatch","useForm","values","setValues","reset","handleInputChange","target","useStyles","makeStyles","theme","close","position","top","right","padding","header","display","justifyContent","alignItems","ModalFormWithImage","React","memo","isOpen","handleClose","maxWidth","title","subtitle","image","content","actions","classes","Dialog","fullWidth","open","onClose","DialogTitle","className","disableTypography","IconButton","onClick","color","size","CloseRounded","Grid","container","spacing","item","xs","Typography","align","variant","component","DialogContent","DialogActions","formcontrol","flexDirection","margin","width","form","marginLeft","marginRight","overflow","logo","marginTop","marginBottom","footer","paddingTop","paddingBottom","link","borderRadius","backgroundColor","initialErrors","emailError","passwordError","LoginModal","formErrors","setFormErrors","errorFromServer","setErrorFromServer","showPassword","setShowPassword","formLoginValues","handleInputFormChange","e","prevState","handleLogin","preventDefault","Object","keys","map","key","index","trim","reduce","b","test","length","message","src","Logo","alt","onSubmit","noValidate","Alert","severity","TextField","error","helperText","onChange","label","InputProps","endAdornment","onMouseDown","event","Visibility","VisibilityOff","Button","style","Link","href","console","log","nameError","lastnameError","confirmPasswordError","RegisterModal","lastname","confirmPassword","formData","handleRegister","root","minHeight","LandingPage","PublicRoute","isAuthenticated","Component","rest","props","to","PrivateRoute","location","pathname","formatName","firstName","split","firstLastname","getUserInitials","substring","getRecentDesigns","getDesignsByFolder","path","pageParam","from","getPublicDesignsByUser","id","getDesignsSharedWithMe","createDesign","isPublic","deleteDesignById","border","palette","divider","minWidth","cursor","userSelect","background","boxShadow","designHover","ownerInfo","borderTop","paddingLeft","paddingRight","row","rowJustified","col","ellipsis","whiteSpace","textOverflow","designIcon","fontSize","alignSelf","justifySelf","deleteIcon","closeButton","grey","Design","updatedAt","metadata","owner","canDelete","queryClient","useQueryClient","history","useHistory","deleteMutation","useMutation","onMutate","cancelQueries","previousDesigns","getQueryData","previousPublicDesigns","includes","setQueryData","oldData","oldPage","pages","find","page","designs","newDesigns","filter","newPage","assign","newPages","indexOf","previousRecentDesigns","onError","onSettled","invalidateQueries","handleDeleteDesign","stopPropagation","designId","Card","elevation","CardActionArea","CardContent","Description","category","workingTime","hours","minutes","Date","toLocaleDateString","Star","uid","Delete","CardActions","Avatar","occupation","designsContainer","flexGrow","flexWrap","textAlign","loadMore","clickHere","textDecoration","DesignsContainer","status","isFetchingNextPage","fetchNextPage","hasNextPage","handleCreateDesign","i","ownerId","getfolderByPath","createFolder","folderName","paper","text","primary","folderBody","DesignsFolder","Box","Folder","FoldersContainer","icon","LeftPanel","useLocation","createDesignMutation","onSuccess","push","mutate","List","aria-label","ListItem","button","selected","Home","ListItemText","Divider","Group","Public","default","DesignsBreadcrumbs","Breadcrumbs","newPath","folderList","shift","createBreadcrumbsLinks","height","DesignSkeleton","Skeleton","animation","recentDesigns","RecentDesigns","n","Math","trunc","useQuery","isLoading","isError","createSkeletons","Array","designList","folderNameInput","FolderModal","enqueueSnackbar","useSnackbar","setError","setName","createFolderMutation","autoHideDuration","handleCloseModal","handleCreateFolder","aria-labelledby","Close","leftPanel","borderRight","workspace","workSpace","rightPanel","borderLeft","breadCrumbs","designsAndFoldersContainer","sectionTitle","breakpoints","down","MyDesignsPage","urlparams","useParams","designsRef","useRef","setWidth","setHeight","urlPath","designsQuery","useInfiniteQuery","refetchOnWindowFocus","getNextPageParam","lastPage","nPages","foldersQuery","current","offsetHeight","offsetWidth","handleOpenFolderModal","md","lg","ref","ButtonGroup","getUser","searchUsers","updateContact","contacts","newData","updateProfileInformation","institution","country","city","description","photoProfile","errorContainer","EditProfileModal","updateProfileInformationMutation","previousUserProfile","handleSaveInformation","dividers","justify","img","sm","multiline","rows","zIndex","card","photo","UserCard","scoreMean","handleViewUser","ShowContactsModal","contact","designPanel","spaceFirstDataFirstData","centerGrid","justifyItems","spaceSecondData","spaceData","spaceDesign","spaceIcons","UserProfile","refetch","updateConctactMutation","handleAddContact","handleDeleteContact","spaceFirstData","startIcon","Edit","PersonAdd","Apartment","Email","UserConfigContext","useUserConfigState","UserConfigProvider","darkTheme","modeAdvanced","userConfig","setUserConfig","parse","isDarkActive","createMuiTheme","dark","orange","light","lightBlue","main","secondary","deepOrange","deepPurple","navbar","ThemeProvider","brand","search","searchForm","userAndOptions","navbarColor","navbarLetter","menuColor","menu","toolbar","up","NavBar","isMenuOpen","setMenuOpen","setFilter","handleChangeUserConfig","checked","handleSearchUsers","AppBar","Toolbar","OutlinedInput","placeholder","iconButton","Search","currentTarget","Menu","anchorEl","Boolean","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","FormControlLabel","control","Switch","clear","pos","Footer","Container","SharedWithMePage","sharedDesignsQuery","PublicRepositoryPage","usersContainer","SearchUsersPage","q","queryString","redirectTo","users","designReducer","subfield","field","learningActivities","learningActivityIndex","tasks","currentLearningResult","verb","editing","bloomCategories","bloomVerbs","privileges","DesignContext","useDesignState","DesignProvider","designState","SharedDocContext","useSharedDocContext","SharedDocProvider","doc","setDoc","provider","setProvider","setUser","connectToDesign","colors","yDoc","Y","guid","WebsocketProvider","floor","random","clearDoc","Extension","create","defaultOptions","emptyEditorClass","emptyNodeClass","showOnlyWhenEditable","showOnlyCurrent","addProseMirrorPlugins","Plugin","decorations","selection","active","editor","isEditable","options","anchor","isEditorEmpty","textContent","descendants","node","hasAnchor","nodeSize","isNodeEmpty","decoration","Decoration","class","join","DecorationSet","htmlToText","htmlString","span","document","createElement","innerHTML","innerText","rowMax","focused","inputContainer","borderWidth","borderStyle","borderColor","disabled","shape","borderTopRightRadius","borderBottomRightRadius","borderLeftStyle","editorx","overflowX","typography","body1","fontFamily","fontStyle","marginBlockStart","marginBlockEnd","outline","float","pointerEvents","SharedTextFieldTipTapEditor","forwardRef","maxLength","initialvalue","max","min","deleteOnRemove","setFocused","synced","setSynced","setEditor","getText","getHTML","toString","setText","commands","first","setContent","useImperativeHandle","clearText","Editor","editorProps","handleTextInput","view","isNaN","dom","firstChild","match","parseInt","handlePaste","slice","childCount","newValue","extensions","Document","extend","Paragraph","Text","Placeholder","configure","charAt","toUpperCase","CollaborationCursor","Collaboration","CharacterCount","limit","onUpdate","onFocus","onBlur","once","chain","focus","run","ButtonBase","val","ArrowDropUp","ArrowDropDown","taskSpacing","trashIcon","tasksSpacing","taskSpacingDescription","taskSpacingDescriptionBD","colorLearningType","timeField","grid","Task","task","isMounted","hoursRef","minutesRef","descriptionRef","learningType","modality","format","timeHours","duration","timeMinutes","clearTexts","handleEditTaskField","emit","handleChangeDropdown","Paper","square","FormControl","Select","Tooltip","handleDeleteTask","colorBox","colorBoxRightPanel","spacingGraphic","legend","StackedBar","items","legends","valueTotal","toFixed","arrow","itemsLearningType","itemsLearningTypePie","itemsFormat","itemsModality","unitSpacing","titleUnitSpacing","graphicUnitSpacing","spacingDescriptionlearningActivity","spacingDescription","spacingLinkedResults","buttonPos","gridTask","learningResultList","maxHeight","LearningActivity","learningActivity","titleRef","taskRefs","handleDeleteUnit","learningResults","forEach","handleAddTask","handleEditLearningActivityField","results","result","Checkbox","lr","isSelected","indexLearningResults","r","_indexLearningResults","handleToggleLearningResult","PieGraphic","dataSource","argumentField","valueField","verticalAlignment","horizontalAlignment","itemTextPosition","rowCount","enabled","customizeTooltip","arg","argumentText","percent","titleSectionShare","divSectionShare","ShareModal","inputUser","setInputUser","newPrivileges","setNewPrivileges","isShareModalOpen","Autocomplete","blurOnSelect","v","u","privilege","handleAddContactInArray","inputValue","onInputChange","newInputUser","getOptionSelected","option","renderInput","params","p","handleChange","buttonGroupWorkSpace","textLefPanel","borderBottom","LeftPanelMetadata","textLefPanelMetadata","graphicsSpacing","betweenGraphics","workSpaceUnits","DesignWorkspace","showGraphicLearningType","showGraphicFormat","showGraphicModality","activities","workingTimeDesign","classSize","priorKnowledge","objective","TimeFormatter","toHoursAndMinutes","timeInMinutes","round","toMinutes","getCategories","LearningResult","uiDispatch","designDispatch","gutterBottom","_index","clipPath","transition","crear","evaluar","analizar","aplicar","comprender","recordar","BloomPiramid","isActive","toLowerCase","BloomVerbList","Radio","LearningResultModal","setDescription","activeStep","setActiveStep","steps","Stepper","alternativeLabel","Step","StepLabel","prevActiveStep","learningResult","categoryPopOver","DesignMetadata","nameRef","classSizeRef","priorKnowledgeRef","objectiveRef","workingTimeDesignHours","workingTimeDesignMinutes","workingTimeHours","workingTimeMinutes","clearEditors","handleChangeMetadataField","categories","c","handleOpenLearningResultmodal","InputLabel","labelId","MenuProps","TabPanel","other","role","hidden","getBloomCategories","getBloomVerbs","menuLetters","menuLettersSelected","tabBar","usersConnecteds","a11yProps","DesignPage","metadataRef","setUsersList","tabIndex","setTabIndex","prefetchBloomCategories","prefetchBloomVerbs","metadataComponent","res","off","Tabs","Tab","titleMargin","bodyMargin","ConfirmationModal","confirmResult","AppRouter","CssBaseline","maxSnack","TransitionComponent","Grow","exact","QueryClient","LearningActivityDesigner","QueryClientProvider","client","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.40ad2373.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_URL;\r\n//const baseUrl = 'http://localhost:4000/api';\r\nconst fetchWithoutToken = async (endpoint, data, method = 'GET') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n\r\n    if (method === 'GET') {\r\n        const resp = await fetch(url);\r\n        return await resp.json();\r\n    } else {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await resp.json();\r\n    }\r\n};\r\n\r\nconst fetchWithToken = async (endpoint, data, method = 'GET') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n    const token = localStorage.getItem('token') || '';\r\n    if (method === 'GET') {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'x-token': token,\r\n            },\r\n        });\r\n        return await resp.json();\r\n    } else {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'x-token': token,\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await resp.json();\r\n    }\r\n};\r\n\r\nexport {\r\n    fetchWithoutToken,\r\n    fetchWithToken,\r\n};\r\n","import React, { useState, useEffect, useContext, createContext, useCallback } from 'react';\r\nimport { fetchWithoutToken, fetchWithToken } from 'utils/fetch';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuthState() {\r\n\tconst context = useContext(AuthContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useAuthState must be used within a AuthProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n    checking: true,\r\n\tuser: null,\r\n\ttoken: null,\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [authState, setAuthState] = useState(initialState);\r\n\r\n\tconst login = async ( email, password ) => {\r\n        const resp = await fetchWithoutToken('auth/login', { email, password }, 'POST');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n        }\r\n        return resp;\r\n    };\r\n\r\n\tconst register = async (userData) => {\r\n        const resp = await fetchWithoutToken('auth/register', userData, 'POST');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n        }\r\n        return resp;\r\n    };\r\n\r\n\tconst logout = () => {\r\n        setAuthState({\r\n            checking: false,\r\n            user: null,\r\n\t\t\ttoken: null,\r\n        });\r\n    };\r\n\r\n\tconst verifyToken = useCallback( async () => {\r\n        const token = localStorage.getItem('token');\r\n        if(!token){\r\n            setAuthState({\r\n\t\t\t\tuser: null,\r\n                token: null,\r\n                checking: false,\r\n            });\r\n            return false;\r\n        }\r\n        const resp = await fetchWithToken('auth/renew');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            localStorage.setItem('token', token);\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n            return true;\r\n        } else {\r\n            setAuthState({\r\n                user: null,\r\n                token: null,\r\n                checking: false,\r\n            });\r\n            return false;\r\n        }\r\n    }, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authState.token === null) {\r\n\t\t\tlocalStorage.removeItem('token');\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem('token', authState.token);\r\n\t\t}\r\n\t}, [authState.token]);\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ \r\n\t\t\tauthState,\r\n\t\t\tlogin,\r\n\t\t\tregister,\r\n\t\t\tlogout,\r\n\t\t\tverifyToken,\r\n\t\t\tsetAuthState \r\n\t\t}}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n","import { createContext, useContext, useEffect } from \"react\";\r\nimport { useSocket } from \"hooks/useSocket\";\r\nimport { useAuthState } from \"./AuthContext\";\r\n\r\nexport const SocketContext = createContext();\r\n\r\nexport const useSocketState = () => {\r\n\tconst context = useContext(SocketContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useSocketState must be used within a SocketProvider');\r\n\t}\r\n\treturn context;\r\n}\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n\r\n    const { authState } = useAuthState();\r\n    const { socket, online, connectSocket, disconnectSocket } = useSocket(process.env.REACT_APP_SOCKET_URL);\r\n    \r\n    useEffect(() => {\r\n        const logged = !!authState.token;\r\n        if( logged ) connectSocket();\r\n    }, [ authState.token, connectSocket ]);\r\n\r\n    useEffect(()=>{\r\n        const logged = !!authState.token;\r\n        if( !logged ) disconnectSocket();\r\n    }, [ authState.token, disconnectSocket ]);\r\n\r\n    return (\r\n        <SocketContext.Provider value={{ socket, online }}>\r\n            { children }\r\n        </SocketContext.Provider>\r\n    );\r\n};","import { useAuthState } from \"contexts/AuthContext\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nexport const useSocket = (serverPath) => {\r\n    const [socket, setSocket] = useState(null);\r\n    const [online, setOnline] = useState(false);\r\n    const { authState } = useAuthState();\r\n\r\n    const connectSocket = useCallback(() => {\r\n        const token = authState.token;\r\n        const tempSocket = io.connect( serverPath, {\r\n            transports: ['websocket'],\r\n            autoConnect: true,\r\n            forceNew: true,\r\n            query: {\r\n                'x-token': token,\r\n            },\r\n        });\r\n        setSocket(tempSocket);\r\n    }, [serverPath, authState.token]);\r\n\r\n    const disconnectSocket = useCallback(() => {\r\n        socket?.disconnect();\r\n    }, [socket]);\r\n\r\n    useEffect(() => {\r\n        setOnline( socket?.connected );\r\n    }, [socket])\r\n\r\n    useEffect(() => {\r\n        socket?.on('connect', () => setOnline(true));\r\n        socket?.on('disconnect', () => setOnline(false));\r\n    }, [socket]);\r\n\r\n\r\n    return {\r\n        socket,\r\n        online,\r\n        connectSocket,\r\n        disconnectSocket\r\n    };\r\n};","import ui from 'types/ui';\r\nimport design from 'types/design';\r\n\r\nconst types = {\r\n    ui,\r\n    design,\r\n};\r\n\r\nexport default types;","const ui = {\r\n    toggleLoginModal: '[UI] toggle login modal',\r\n    toggleModal: '[UI] toggle modal',\r\n    toggleRegisterModal: '[UI] toggle register modal',\r\n    toggleLearningResultModal: '[UI] toggle learning result modal',\r\n    updateFolderPath: '[UI] update folder path',\r\n    toggleConfirmAction: '[UI] confirm action',\r\n    setFolder: '[UI] set folder data',\r\n    setConfirmData: '[UI] set confirm data',\r\n};\r\n\r\nexport default ui;","const design = {\r\n    updateDesign: '[DESIGN] toggle login modal',\r\n    changeMetadataField: '[DESIGN] change metadata field',\r\n    changeTaskField: '[DESIGN] change task field',\r\n    setCurrentLearningResultField: '[DESIGN] set learning result field',\r\n    clearCurrentLearningResult: '[DESIGN] clear current learning result',\r\n    setCurrentLearningResult: '[DESIGN] set current learning result',\r\n    setBloomCategories: '[DESIGN] set bloom categories',\r\n    setBloomVerbs: '[DESIGN] set bloom verbs',\r\n    setDesignPrivileges: '[DESIGN] set design privileges',\r\n};\r\n\r\nexport default design;","import types from \"types\";\r\n\r\n\r\nexport const uiReducer = ( state, action ) => {\r\n    switch (action.type) {\r\n        case types.ui.toggleModal:\r\n            return {\r\n                ...state,\r\n                ['is' + action.payload + 'ModalOpen']: !state['is' + action.payload + 'ModalOpen'],\r\n            };\r\n        case types.ui.toggleRegisterModal:\r\n            return {\r\n                ...state,\r\n                isRegisterModalOpen: !state.isRegisterModalOpen,\r\n            };\r\n        case types.ui.updateFolderPath:\r\n            if (state.folderPath !== action.payload) {\r\n                return {\r\n                    ...state,\r\n                    folderPath: action.payload,\r\n                };\r\n            } else return state;\r\n        case types.ui.toggleWitchOpenModal:\r\n            return {\r\n                ...state,\r\n                setWitchOpenModal: !state.setWitchOpenModal,\r\n            };\r\n        case types.ui.setFolder:\r\n            return {\r\n                ...state,\r\n                folder: action.payload,\r\n            };\r\n        case types.ui.setConfirmData:\r\n            return{\r\n                ...state,\r\n                confirmModalData: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import React, { useContext, createContext, useReducer } from 'react';\r\nimport { uiReducer } from 'contexts/ui/uiReducer';\r\n\r\nconst UiContext = createContext();\r\n\r\nexport function useUiState() {\r\n\tconst context = useContext(UiContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useUiState must be used within a UiProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n\tfolderPath: '/',\r\n\tisLoginModalOpen: false,\r\n\tisRegisterModalOpen: false,\r\n\tisLearningResultModalOpen: false,\r\n\tisEditProfileModalOpen: false,\r\n\tisContactsModalOpen: false,\r\n\tisConfirmationModalOpen: false,\r\n\tisOtherConfirmationModalOpen: false,\r\n\tisShareOpenModal: false,\r\n\tsetWichOpenModal: false,\r\n\tisFolderModalOpen: false,\r\n\tfolder: {\r\n\t\t_id: null,\r\n\t\tname: '',\r\n\t},\r\n\tconfirmModalData: {\r\n\t\ttype: null,\r\n\t\targs: null,\r\n\t\tactionMutation: null,\r\n\t},\r\n};\r\n\r\nexport const UiProvider = ({ children }) => {\r\n\r\n\tconst [ uiState, dispatch ] = useReducer(uiReducer, initialState);\r\n\r\n\treturn (\r\n\t\t<UiContext.Provider value={ { uiState, dispatch } }>\r\n\t\t\t{ children }\r\n\t\t</UiContext.Provider>\r\n\t);\r\n};\r\n","export default \"data:image/png;base64,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\"","import { useState } from 'react';\r\n\r\n\r\nexport const useForm = ( initialState = {} ) => {\r\n    \r\n    const [values, setValues] = useState(initialState);\r\n\r\n    const reset = () => {\r\n        setValues( initialState );\r\n    }\r\n\r\n\r\n    const handleInputChange = ({ target }) => {\r\n        setValues({\r\n            ...values,\r\n            [ target.name ]: target.value\r\n        });\r\n\r\n    }\r\n\r\n    return [ values, handleInputChange, reset, setValues ];\r\n\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogActions,\r\n    Typography,\r\n    IconButton,\r\n    Grid,\r\n} from '@material-ui/core';\r\nimport { CloseRounded } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    close: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 5,\r\n        padding: 15,\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    }\r\n}));\r\n\r\nexport const ModalFormWithImage = React.memo(({ isOpen, handleClose, maxWidth = 'sm', title = '', subtitle = '', image, content, actions }) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <Dialog\r\n            fullWidth={true}\r\n            maxWidth={maxWidth}\r\n            open={isOpen}\r\n            onClose={handleClose}\r\n        >\r\n            <DialogTitle className={classes.header} disableTypography>\r\n                <IconButton className={classes.close} onClick={handleClose} color=\"inherit\" size='small'>\r\n                    <CloseRounded />\r\n                </IconButton>\r\n                <Grid container spacing={1}>\r\n                    <Grid item xs={12}>\r\n                        {image}\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography align='center' variant='h5' component='p'>\r\n                            {title}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography align='center' variant='subtitle1' component='h1'>\r\n                            {subtitle}\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {content}\r\n            </DialogContent>\r\n            {\r\n                (actions) && <DialogActions>\r\n                    {actions}\r\n                </DialogActions>\r\n            }\r\n        </Dialog>\r\n    );\r\n});\r\n\r\nModalFormWithImage.propTypes = {\r\n    isOpen: PropTypes.bool.isRequired,\r\n    handleClose: PropTypes.func.isRequired,\r\n    image: PropTypes.object.isRequired,\r\n    content: PropTypes.object,\r\n    actions: PropTypes.object,\r\n}; ","import React, { useState } from 'react';\r\nimport {\r\n    Button,\r\n    makeStyles,\r\n    IconButton,\r\n    TextField,\r\n    Link\r\n} from '@material-ui/core';\r\n\r\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ModalFormWithImage } from 'components/ModalFormWithImage';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formcontrol: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        margin: 'auto',\r\n        width: 'fit-content',\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    form: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        marginLeft: '10%',\r\n        marginRight: '10%',\r\n        width: '80%',\r\n        overflow: 'auto',\r\n    },\r\n    logo: {\r\n        display: 'block',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        width: '30%',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    footer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: 30,\r\n        paddingBottom: 15,\r\n    },\r\n    link: {\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    }\r\n}));\r\n\r\nconst initialErrors = {\r\n    emailError: null,\r\n    passwordError: null,\r\n};\r\n\r\nexport const LoginModal = () => {\r\n\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { login } = useAuthState();\r\n    const [formErrors, setFormErrors] = useState(initialErrors);\r\n    const [errorFromServer, setErrorFromServer] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [formLoginValues, handleInputChange, reset] = useForm({\r\n        email: '',\r\n        password: ''\r\n    });\r\n    const { email, password } = formLoginValues;\r\n    const { emailError, passwordError } = formErrors;\r\n\r\n    const isFormComplete = () => {\r\n        return Object.keys(formLoginValues).map((key, index) => {\r\n            if (formLoginValues[key].trim() === '') {\r\n                setFormErrors((prevState) => ({\r\n                    ...prevState,\r\n                    [key + 'Error']: 'Este campo es requerido.',\r\n                }));\r\n                return false;\r\n            } else {\r\n                setFormErrors((prevState) => ({\r\n                    ...prevState,\r\n                    [key + 'Error']: null,\r\n                }));\r\n            }\r\n            return true;\r\n        }).reduce((a, b) => a && b);\r\n    };\r\n\r\n    const isEmailValid = () => {\r\n        if (!/^[-\\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\\.){1,125}[A-Z]{2,63}$/i.test(email)) {\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                emailError: 'El correo debe tener la siguiente estructura: example@example.com',\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const isPasswordValid = () => {\r\n        if (password.length >= 8 && password.length <= 16) return true;\r\n        setFormErrors((prevState) => ({\r\n            ...prevState,\r\n            passwordError: 'La contrasea debe tener entre 8 y 16 caracteres.',\r\n        }));\r\n        return false;\r\n    };\r\n\r\n    const handleInputFormChange = (e) => {\r\n        setErrorFromServer(null);\r\n        setFormErrors((prevState) => ({\r\n            ...prevState,\r\n            [e.target.name + 'Error']: null,\r\n        }));\r\n        handleInputChange(e);\r\n    }\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        if (!isFormComplete()) return;\r\n        if (!isEmailValid()) return;\r\n        if (!isPasswordValid()) return;\r\n        const resp = await login(email, password);\r\n        if (!resp.ok) setErrorFromServer(resp.message);\r\n        else dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n        reset();\r\n    };\r\n\r\n    const recoverPassword = (e) => {\r\n        e.preventDefault();\r\n        console.log('Redirigir a recuperar contrasea...');\r\n    }\r\n\r\n    const handleClickShowPassword = () => {\r\n        setShowPassword(!showPassword);\r\n    };\r\n\r\n    const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    const toRegister = (e) => {\r\n        e.preventDefault();\r\n        handleClose();\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ModalFormWithImage\r\n                isOpen={uiState.isLoginModalOpen}\r\n                handleClose={handleClose}\r\n                title='Bienvenido!'\r\n                subtitle='Completa los campos para ingresar con tu cuenta'\r\n                image={<img className={classes.logo} src={Logo} alt=\"Logo\" />}\r\n                content={\r\n                    <form className={classes.form} onSubmit={handleLogin} noValidate>\r\n                        {errorFromServer && <Alert severity=\"error\"> {errorFromServer}</Alert>}\r\n                        <TextField\r\n                            error={!!emailError}\r\n                            helperText={emailError}\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            onChange={handleInputFormChange}\r\n                            label=\"Email\"\r\n                            type=\"email\"\r\n                            fullWidth\r\n                        />\r\n                        <TextField\r\n                            error={!!passwordError}\r\n                            helperText={passwordError}\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            name=\"password\"\r\n                            value={password}\r\n                            onChange={handleInputFormChange}\r\n                            label=\"Contrasea\"\r\n                            type={showPassword ? 'text' : 'password'}\r\n                            fullWidth\r\n                            InputProps={{\r\n                                endAdornment:\r\n                                    <IconButton\r\n                                        onClick={handleClickShowPassword}\r\n                                        onMouseDown={handleMouseDownPassword}\r\n                                    >\r\n                                        {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                                    </IconButton>\r\n\r\n                            }}\r\n                        />\r\n                        <div className={classes.footer}>\r\n                            <Button variant='outlined' type='submit' fullWidth>\r\n                                Iniciar Sesin\r\n                            </Button>\r\n                            <div style={{ paddingTop: 20 }}>\r\n                                <Link href='#' align='center' variant=\"body1\" onClick={recoverPassword}>\r\n                                    Olvidaste tu contrasea?\r\n                                </Link>\r\n                            </div>\r\n                            <div style={{ paddingBottom: 15, paddingTop: 10 }}>\r\n                                <Link href=\"#\" variant=\"body1\" onClick={toRegister}>\r\n                                    No tienes cuenta? Registrate\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                }\r\n            />\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Link,\r\n} from '@material-ui/core';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { ModalFormWithImage } from 'components/ModalFormWithImage';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    form: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        marginLeft: '10%',\r\n        marginRight: '10%',\r\n        width: '80%',\r\n    },\r\n    logo: {\r\n        display: 'block',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        width: '30%',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    footer: {\r\n        display: 'flex',\r\n        flexDirection:'column',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: 30,\r\n        paddingBottom: 15,\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    }\r\n}));\r\n\r\nconst initialErrors = {\r\n    nameError: null,\r\n    lastnameError: null,\r\n    emailError: null,\r\n    passwordError: null,\r\n    confirmPasswordError: null,\r\n};\r\n\r\nexport const RegisterModal = React.memo(() => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { register } = useAuthState();\r\n    const [ errorFromServer, setErrorFromServer ] = useState(null);\r\n    const [ formErrors, setFormErrors ] = useState(initialErrors);\r\n    const [ formData, handleInputChange, reset ] = useForm({\r\n        name: '',\r\n        lastname: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n    });\r\n    const { name, lastname, email, password, confirmPassword } = formData;\r\n    const { nameError, lastnameError, emailError, passwordError, confirmPasswordError } = formErrors;\r\n    \r\n    const handleClose = () => {\r\n        dispatch({ \r\n            type: types.ui.toggleModal,\r\n            payload: 'Register'\r\n        });\r\n        reset();\r\n        setFormErrors(initialErrors);\r\n        setErrorFromServer(null);\r\n    };\r\n    \r\n    const isFormComplete = () => {\r\n        return Object.keys( formData ).map((key, index) => {\r\n            if(formData[key].trim() === ''){\r\n                setFormErrors((prevState)=>({\r\n                    ...prevState,\r\n                    [ key + 'Error']: 'Este campo es requerido.',\r\n                }));\r\n                return false;\r\n            } else {\r\n                setFormErrors((prevState)=>({\r\n                    ...prevState,\r\n                    [ key + 'Error']: null,\r\n                }));\r\n            }\r\n            return true;\r\n        }).reduce((a, b) => a && b);\r\n    }\r\n\r\n    const paswordsMatchs = () => {\r\n        if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(password)){\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'La contrasea debe tener al menos un carcter en minscula, uno en mayscula, un nmero y debe tener entre 8 y 16 caractres de longitud.',\r\n            }));\r\n            return false;\r\n        }\r\n        if (password.trim() !== confirmPassword.trim()) {\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'Las contraseas no coinciden.',\r\n                confirmPasswordError: 'Las contraseas no coinciden.'\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    const handleInputFormChange = (e) => {\r\n        setErrorFromServer(null);\r\n        setFormErrors((prevState)=>({\r\n            ...prevState,\r\n            [ e.target.name + 'Error']: null,\r\n        }));\r\n        handleInputChange(e);\r\n    }\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault();\r\n        if (!isFormComplete()) return;\r\n        if (!paswordsMatchs()) return;\r\n        let resp = await register( formData );\r\n        if (!resp.ok) setErrorFromServer(resp.message);\r\n        else dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const toLogin = (e) => {\r\n        e.preventDefault();\r\n        handleClose();\r\n        dispatch({ \r\n            type: types.ui.toggleModal,\r\n            payload: 'Login'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <ModalFormWithImage\r\n            isOpen={ uiState.isRegisterModalOpen }\r\n            handleClose={ handleClose }\r\n            title='Bienvenido!'\r\n            subtitle='Completa los campos para registrar tu cuenta'\r\n            image={<img className={classes.logo} src={Logo} alt=\"Logo\" />}\r\n            content={\r\n                <form className={classes.form} onSubmit={handleRegister} noValidate>\r\n                    { errorFromServer && <Alert severity=\"error\">{ errorFromServer }</Alert> }\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!nameError}\r\n                        helperText={ nameError } \r\n                        margin=\"dense\" \r\n                        name=\"name\" \r\n                        value={ name } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Nombres\" \r\n                        type=\"text\" \r\n                        fullWidth\r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!lastnameError}\r\n                        helperText={ lastnameError } \r\n                        margin=\"dense\" \r\n                        name=\"lastname\" \r\n                        value={ lastname } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Apellidos\" \r\n                        type=\"text\" \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!emailError}\r\n                        helperText={ emailError } \r\n                        margin=\"dense\" \r\n                        name=\"email\" \r\n                        value={ email } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Email\" \r\n                        type=\"email\" \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!passwordError}\r\n                        helperText={ passwordError } \r\n                        margin=\"dense\" \r\n                        name=\"password\" \r\n                        value={ password } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Contrasea\" \r\n                        type='password' \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!confirmPasswordError}\r\n                        helperText={ confirmPasswordError } \r\n                        margin=\"dense\" \r\n                        name=\"confirmPassword\" \r\n                        value={ confirmPassword } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Repetir contrasea\" \r\n                        type='password' \r\n                        fullWidth \r\n                    />\r\n                    \r\n                    <div className={classes.footer}>\r\n                        <Button color=\"primary\" variant='outlined' type='submit' fullWidth>\r\n                            Registrarme\r\n                        </Button>\r\n                        <Link href='#' style={{paddingTop:20, paddingBottom:15}} variant=\"body1\" onClick={toLogin}>\r\n                            Ya tienes cuenta?\r\n                        </Link>\r\n                    </div>\r\n                    \r\n                </form>\r\n            }\r\n        />\r\n    );\r\n});","import { makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { LoginModal } from 'pages/LandingPage/LoginModal';\r\nimport { RegisterModal } from 'pages/LandingPage/RegisterModal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        minHeight: 'calc(100vh - 64px)',\r\n    }\r\n}));\r\n\r\nexport const LandingPage = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h1>LandingPage</h1>\r\n            <hr/>\r\n            <LoginModal />\r\n            <RegisterModal />\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport const PublicRoute = ({\r\n    isAuthenticated,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    return (\r\n        <Route {...rest}\r\n            component={\r\n                (props) => (\r\n                    ( !isAuthenticated )\r\n                        ? <Component {...props} />\r\n                        : <Redirect to=\"/my-designs\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nPublicRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}; \r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport const PrivateRoute = ({\r\n    isAuthenticated,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    localStorage.setItem('lastPath', rest.location.pathname);\r\n    return (\r\n        <Route {...rest}\r\n            component={\r\n                (props) => (\r\n                    ( isAuthenticated )\r\n                        ? <Component {...props} />\r\n                        : <Redirect to=\"/\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nPrivateRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}; \r\n","export const formatName = (name, lastname) => {\r\n    const firstName = name.split(' ')[0];\r\n    const firstLastname = lastname.split(' ')[0];\r\n    return `${ firstName } ${ firstLastname }`;\r\n};\r\n\r\nexport const getUserInitials = (name, lastname) => {\r\n    return `${ name.substring(0, 1) + lastname.substring(0, 1) }`;\r\n};","import { fetchWithToken } from \"utils/fetch\";\r\n\r\n\r\nexport const getRecentDesigns = async () => {\r\n    const resp = await fetchWithToken('design/recent');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getDesignsByFolder = async ( path, pageParam ) => {\r\n    const resp = await fetchWithToken('design/user', {\r\n        path,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getPublicDesignsByUser = async ( id, pageParam ) => {\r\n    const resp = await fetchWithToken(`design/public/user/`, {\r\n        id,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getDesignsSharedWithMe = async ( pageParam ) => {\r\n    const resp = await fetchWithToken(`design/shared-with-user/`, {\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const createDesign = async ({ path, isPublic = false }) => {\r\n    console.log(isPublic);\r\n    const resp = await fetchWithToken(`design`, { path, isPublic }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const deleteDesignById = async ({ id }) => {\r\n    const resp = await fetchWithToken(`design/${ id }`, {}, 'DELETE');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const uptdateUserInDesign = async ({id, privileges}) =>{\r\n    console.log(id, privileges)\r\n    try {\r\n        const resp = await fetchWithToken(`design/${id}`, { \r\n            newData: { id, privileges }\r\n         }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        };\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { Avatar, Card, CardActionArea, CardActions, CardContent, IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { Delete, Description, Star } from '@material-ui/icons';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { deleteDesignById } from 'services/DesignService';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        width: 325,\r\n        minWidth: 325,\r\n        margin: '10px 10px 10px 0px',\r\n        borderRadius: 5,\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    ownerInfo: {\r\n        borderTop: `1px solid ${theme.palette.divider}`,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n    },\r\n    row: {\r\n        display: 'flex',\r\n    },\r\n    rowJustified: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n    },\r\n    col: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    ellipsis: {\r\n        width: 200,\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    },\r\n    designIcon: {\r\n        marginLeft: -12,\r\n        fontSize: 50,\r\n        alignSelf: 'center',\r\n        justifySelf: 'start',\r\n        width: '20%',\r\n    },\r\n    deleteIcon: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 8,\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\n\r\nexport const Design = ({ _id, title, updatedAt, metadata, folder, owner, canDelete = true }) => {\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n    const { dispatch } = useUiState();\r\n    const history = useHistory();\r\n    //const [hours, minutes] = TimeFormatter.toHoursAndMinutes(metadata.workingTime ?? 0);\r\n\r\n    const deleteMutation = useMutation(deleteDesignById, {\r\n        onMutate: async () => {\r\n            // Cancela consultas con la key especificada\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', folder.path]);\r\n            await queryClient.cancelQueries([owner._id, 'user-public-designs']);\r\n            // Guarda los datos antes de la eliminacin por si algo sale mal\r\n            const previousDesigns = queryClient.getQueryData(['designs', folder.path]);\r\n            const previousPublicDesigns = queryClient.getQueryData([owner, 'user-public-designs']);\r\n            // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n            let keys = ['designs', folder.path];\r\n            if (!history.location.pathname.includes('/my-designs')) keys = [owner._id, 'user-public-designs'];\r\n            queryClient.setQueryData(keys, oldData => {\r\n                const oldPage = oldData.pages.find(page => page.designs.find(design => design._id === _id));\r\n                const newDesigns = oldPage.designs.filter((design) => design._id !== _id);\r\n                const newPage = Object.assign({}, { ...oldPage, designs: newDesigns });\r\n                let newPages = oldData.pages;\r\n                newPages[oldData.pages.indexOf(oldPage)] = newPage;\r\n                return Object.assign({}, { ...oldData, pages: newPages });\r\n            });\r\n            if (folder.path === '/') {\r\n                const previousRecentDesigns = queryClient.getQueryData('recent-designs');\r\n                // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n                queryClient.setQueryData('recent-designs', oldData => oldData.filter((design) => design._id !== _id));\r\n                return { previousDesigns, previousPublicDesigns, previousRecentDesigns };\r\n            }\r\n            // Retorna un contexto con los datos previos a la eliminacin para restaurar la consulta si es que algo sale mal\r\n            return { previousDesigns, previousPublicDesigns };\r\n        },\r\n        // Si la mutacin falla, usa los datos previos desde el contexto retornado en onMutate para restaurar los datos\r\n        onError: (error, design, context) => {\r\n            // TODO: Emitir notificacin para retroalimentar\r\n            console.log(error);\r\n            queryClient.setQueryData(['designs', folder.path], context.previousDesigns);\r\n            queryClient.setQueryData([owner, 'user-public-designs'], context.previousPublicDesigns);\r\n            if (context.previousRecentDesigns) queryClient.setQueryData('recent-designs', context.previousRecentDesigns);\r\n        },\r\n        onSettled: () => {\r\n            // Invalida las queries para que todas las queries con estas keys se actualicen por cambios\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', folder.path]);\r\n            queryClient.invalidateQueries([owner._id, 'user-public-designs']);\r\n        },\r\n    });\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleDeleteDesign = async (e) => {\r\n        e.stopPropagation();\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: 'diseo',\r\n                args: { designId: _id },\r\n                actionMutation: deleteMutation,\r\n            }\r\n        })\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n\r\n    return (\r\n        <Card className={classes.root} elevation={0}>\r\n            <CardActionArea component={Link} to={`/designs/${_id}`}>\r\n                <CardContent>\r\n                    <div className={classes.row} style={{ width: '100%' }}>\r\n                        <Description className={classes.designIcon} />\r\n                        <div className={classes.col}>\r\n                            <div className={classes.row}>\r\n                                <Typography className={classes.ellipsis} variant='h5' component=\"h2\" >{title}</Typography>\r\n                            </div>\r\n                            <div className={classes.row}>\r\n                                <Typography className={classes.ellipsis} variant=\"body1\" component=\"p\">{metadata.category ? metadata.category.name : 'Sin categora'}</Typography>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={classes.rowJustified}>\r\n                        <Typography variant=\"body1\" component=\"p\">Tiempo de diseo: {`${metadata.workingTime.hours ?? 0}:${metadata.workingTime.minutes ?? 0}`} Hrs</Typography>\r\n                    </div>\r\n                    <div className={classes.rowJustified} style={{ marginTop: 10, marginBottom: -5 }}>\r\n                        <Typography color=\"textSecondary\" variant='body2'>ltima modificacin: {new Date(updatedAt).toLocaleDateString()}</Typography>\r\n                        <div className={classes.row} style={{ marginRight: 4 }}>\r\n                            <Star fontSize='small' />\r\n                            <Typography variant='body2'> 4.6</Typography>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            {\r\n                canDelete && authState.user.uid === owner._id && (<IconButton className={classes.deleteIcon} onClick={handleDeleteDesign}>\r\n                    <Delete />\r\n                </IconButton>)\r\n            }\r\n            <CardActionArea component={Link} to={`/profile/${owner._id}`}>\r\n\r\n                <CardActions className={classes.ownerInfo}>\r\n                    <Avatar\r\n                        alt={formatName(owner.name, owner.lastname)}\r\n                    //src='https://i.pinimg.com/400x300/d6/e6/28/d6e6281bb90621d9be0a9e53d882c2c6.jpg'\r\n                    >\r\n                        {getUserInitials(owner.name, owner.lastname)}\r\n                    </Avatar>\r\n                    <div>\r\n                        <Typography color='textPrimary'>{formatName(owner.name, owner.lastname)}</Typography>\r\n                        <Typography color=\"textSecondary\">{owner.occupation ?? 'Sin ocupacin'}</Typography>\r\n                    </div>\r\n                </CardActions>\r\n            </CardActionArea>    \r\n        </Card>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Button, Link, makeStyles } from '@material-ui/core';\r\nimport { Design } from 'components/Design';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    designsContainer: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'flex-start',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems: 'center',\r\n    },\r\n    loadMore: {\r\n        marginBottom: 50,\r\n    },\r\n    clickHere: {\r\n        textDecoration: 'none',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n});\r\n\r\nexport const DesignsContainer = ({ data, status, isFetchingNextPage, fetchNextPage, hasNextPage, handleCreateDesign, label }) => {\r\n    const classes = useStyles();\r\n    const { authState } = useAuthState();\r\n\r\n    const designList = () => {\r\n        return data.pages.map((page, index) => {\r\n            return page.designs.map((design, i) => <Design key={'my-design' + design._id} title={design.metadata.name} {...design} />);\r\n        });\r\n    };\r\n\r\n    const alert = () => {\r\n        if(label === 'shared-with-me'){\r\n            return (\r\n                <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                    No se han encontrado diseos compartidos. Cuando otros usuarios compartan diseos contigo aparecern aqu.\r\n                </Alert>\r\n            );\r\n        } else if (label === 'user-profile'){\r\n            if (data.pages[0].ownerId === authState.user.uid) {\r\n                return (\r\n                    <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                        No cuentas con diseos pblicos. Crea tu primer diseo pblico haciendo click {' '}\r\n                        <Link className={classes.clickHere} onClick={handleCreateDesign}>aqu</Link>\r\n                        !\r\n                    </Alert>\r\n                );\r\n            } else {\r\n                return (\r\n                    <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                        Este usuario no cuenta con diseos pblicos.\r\n                    </Alert>\r\n                );\r\n            }\r\n        } else {\r\n            return (\r\n                <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                    No se han encontrado diseos en este directorio. Crea tu primer diseo haciendo click {' '}\r\n                    <Link className={classes.clickHere} onClick={handleCreateDesign}>aqu</Link>\r\n                    !\r\n                </Alert>\r\n            );\r\n        }\r\n    };\r\n\r\n    return status === 'loading' ? (\r\n        <p>Loading...</p>\r\n    ) : status === 'error' ? (\r\n        <Alert severity='error' className={classes.error}>\r\n            Ha ocurrido un problema al intentar obtener los diseos. Esto probablemente se deba a un problema de conexin, por favor revise que su equipo tenga conexin a internet e intente ms tarde.\r\n            Si el problema persiste, por favor comunquese con el equipo de soporte.\r\n        </Alert>\r\n    ) : (\r\n        <div className={classes.root}>\r\n            <div className={classes.designsContainer}>\r\n                {\r\n                    data.pages[0].designs.length > 0\r\n                        ? designList()\r\n                        : alert()\r\n                }\r\n            </div>\r\n            {\r\n                data && data.pages[0].designs.length > 0 && hasNextPage &&\r\n                <Button className={classes.loadMore} color='primary' onClick={() => fetchNextPage()}>\r\n                    {\r\n                        isFetchingNextPage\r\n                            ? 'Cargando ms...'\r\n                            : 'Cargar Ms'\r\n                    }\r\n            </Button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\n\r\nexport const getfolderByPath = async ( path ) => {\r\n    const resp = await fetchWithToken('folder/user', {\r\n        path,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const createFolder = async ({ path, folderName }) => {\r\n    const resp = await fetchWithToken('folder/create', {\r\n        path,\r\n        folderName,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React from 'react';\r\nimport { Box, makeStyles, Typography } from '@material-ui/core';\r\nimport { Folder } from '@material-ui/icons';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst useStyles = makeStyles((theme) =>({\r\n    root: {\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        width: 325,\r\n        minWidth: 325,\r\n        borderRadius: 5,\r\n        margin: '10px 10px 10px 0px',\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        backgroundColor: theme.palette.background.paper,\r\n        textDecoration: 'none',\r\n        color: theme.palette.text.primary,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    folderBody: {\r\n        padding: '15px 10px 15px 20px',\r\n        display: 'flex',\r\n        justifyContent: 'start',\r\n        alignItems: 'center',\r\n        textDecoration: 'none',\r\n    },\r\n    folderName: {\r\n        paddingTop: 3,\r\n        fontSize: 20,\r\n        paddingLeft: 20,\r\n    }\r\n}));\r\n\r\nexport const DesignsFolder = ({ name, path, ...rest }) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box className={ classes.root } component={Link}  to={`/my-designs${path}`} { ...rest }>\r\n            <div className={ classes.folderBody }>\r\n                <Folder fontSize='large'/>\r\n                <Typography className={ classes.folderName }>\r\n                    { name }\r\n                </Typography>\r\n            </div>\r\n        </Box>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { DesignsFolder } from 'components/DesignsFolder';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        paddingTop: 15,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    designsContainer: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'flex-start',\r\n    }\r\n});\r\n\r\nexport const FoldersContainer = ({ title, data }) => {\r\n    const classes = useStyles();    \r\n\r\n    const folderList = () => {\r\n        return data.map((folder) => <DesignsFolder key={'my-folder' + folder._id} {...folder} />);\r\n    };\r\n\r\n    return data && data.length > 0 \r\n        ?(<div className={classes.root}>\r\n            <div className={classes.designsContainer}>\r\n                { folderList() }\r\n            </div>\r\n        </div>)\r\n        : (<div></div>);\r\n};\r\n","import React from 'react';\r\nimport { Button, Divider, List, ListItem, ListItemText, makeStyles } from '@material-ui/core';\r\nimport { Group, Home, Public } from '@material-ui/icons';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { createDesign } from 'services/DesignService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n}));\r\n\r\nexport const LeftPanel = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', '/']);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', '/']);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificacin o message para denotar el error.\r\n            console.log(error);\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    const handleCreateDesign = async () => {\r\n        await createDesignMutation.mutate('/');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button variant='contained' color='default' style={{ margin: 10 }} onClick={handleCreateDesign}>\r\n                Crear Diseo\r\n            </Button>\r\n            <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                <ListItem button selected={location.pathname.includes('/my-designs')} component={ Link } to='/my-designs'>\r\n                    <Home className={classes.icon} />\r\n                    <ListItemText primary='Mis Diseos'/>\r\n                </ListItem>\r\n                <Divider />\r\n                <ListItem button selected={location.pathname.includes('/shared-with-me')} component={ Link } to='/shared-with-me'>\r\n                    <Group className={classes.icon} />\r\n                    <ListItemText primary='Compartidos Conmigo' />\r\n                </ListItem>\r\n                <Divider />\r\n                <ListItem button selected={location.pathname.includes('/public-repository')} component={ Link } to='/public-repository'>\r\n                    <Public className={classes.icon} />\r\n                    <ListItemText primary='Repositorio Pblico' />\r\n                </ListItem>\r\n                <Divider />\r\n            </List>\r\n        </>\r\n    )\r\n}\r\n","import { Breadcrumbs, makeStyles, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n        width: '100%',\r\n        padding: '10px 15px 10px 15px',\r\n        borderRadius: 3,\r\n        backgroundColor: theme.palette.background.default\r\n    },\r\n    link:{\r\n        textDecoration: 'none',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n}));\r\n\r\nexport const DesignsBreadcrumbs = () => {\r\n    const classes = useStyles();\r\n    const { uiState } = useUiState();\r\n    const path = uiState.folderPath;\r\n\r\n    const createBreadcrumbsLinks = () => {\r\n        if (path.length !== 1) {\r\n            let newPath = '';\r\n            const folderList = path.split('/');\r\n            folderList.shift();\r\n            return folderList.map((folderName) => {\r\n                newPath += '/' + folderName;\r\n                const folderPath = newPath;\r\n                return (<div key={folderPath} style={{ display: 'flex' }}>\r\n                    {\r\n                        (path === folderPath)\r\n                            ? <Typography color=\"textPrimary\">{folderName} </Typography>\r\n                            : <Typography className={classes.link} color=\"inherit\" component={Link} to={`/my-designs${folderPath}`} >{folderName} </Typography>\r\n                    }\r\n                </div>);\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Breadcrumbs className={classes.root}>\r\n            {\r\n                path.length !== 1\r\n                    ? <Typography className={classes.link} color=\"inherit\" component={Link} to=\"/my-designs\"> Mis Diseos </Typography>\r\n                    : <Typography color=\"textPrimary\"> Mis Diseos </Typography>\r\n            }\r\n            {\r\n                createBreadcrumbsLinks()\r\n            }\r\n        </Breadcrumbs>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { Card, CardActions, CardContent, makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        //paddingTop: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        width: 325,\r\n        minWidth: 325,\r\n        height: 198,\r\n        margin: '10px 10px 10px 0px',\r\n        borderRadius: 10,\r\n        //backgroundColor: theme.palette.divider,\r\n    },\r\n    ownerInfo: {\r\n        borderTop: `1px solid ${theme.palette.divider}`,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        paddingTop: 10,\r\n    },\r\n    row: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    col: {\r\n        width: '80%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    }\r\n}));\r\n\r\nexport const DesignSkeleton = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n                <div className={ classes.row }>\r\n                    <Skeleton variant=\"rect\" width={35} height={43} />\r\n                    <div className={ classes.col }>\r\n                        <div className={ classes.row } style={{marginLeft: -5}}>\r\n                            <Skeleton style={{marginTop: -3}} animation=\"wave\" height={33} width={'80%'}/>\r\n                            <Skeleton variant=\"circle\" width={20} height={20} />\r\n                        </div>\r\n                        <div className={ classes.row } style={{marginLeft: -5}}>\r\n                            <Skeleton style={{marginTop: -3}} animation=\"wave\" height={23} width={'70%'}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={ classes.row }>\r\n                    <Skeleton animation=\"wave\" height={20} width={'70%'}/>  \r\n                </div>\r\n                <div className={ classes.row } >\r\n                    <div className={ classes.row } style={{marginTop:14, marginBottom:-5}}>\r\n                        <Skeleton animation=\"wave\" height={20} width={'70%'} />\r\n                        <Skeleton variant=\"circle\" width={13} height={13} style={{marginTop: 2, marginRight:5}}/>\r\n                    </div>\r\n                    <Skeleton animation=\"wave\" height={20} width={'5%'} style={{marginTop:14, marginBottom:-5}}/>\r\n                </div>\r\n            </CardContent>\r\n            <CardActions className={ classes.ownerInfo } >\r\n                <Skeleton variant=\"circle\" width={40} height={40} style={{marginBottom: 3}}/>\r\n                <div className={ classes.col } style={{marginBottom: 3}}>\r\n                    <Skeleton animation=\"wave\" height={20} width={'100%'}/>\r\n                    <Skeleton animation=\"wave\" height={20} width={'80%'}/>\r\n                </div>\r\n            </CardActions>\r\n        </Card>\r\n    );\r\n}","import React from 'react';\r\nimport { Divider, makeStyles, Typography } from '@material-ui/core';\r\nimport { useQuery } from 'react-query';\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { Design } from 'components/Design';\r\nimport { DesignSkeleton } from 'components/DesignSkeleton';\r\nimport { getRecentDesigns } from 'services/DesignService';\r\n\r\nconst useStyles = makeStyles({\r\n    root:{\r\n        paddingTop: 15,\r\n        marginBottom: 15,\r\n        //marginLeft: -10,\r\n        //marginRight: -10,\r\n    },\r\n    recentDesigns: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'nowrap',\r\n        justifyContent: 'flex-start',\r\n        marginTop:15,\r\n    },\r\n    title: {\r\n        //paddingLeft:10,\r\n        //paddingRight:10,\r\n    }\r\n});\r\n\r\nexport const RecentDesigns = ({ width, height }) => {\r\n    const classes = useStyles();\r\n    const n = Math.trunc(width / 345);\r\n\r\n    const { isLoading, isError, data } = useQuery(\"recent-designs\", async () => {\r\n        return getRecentDesigns();\r\n    });\r\n    \r\n\r\n    if (isError) {\r\n        return <div></div>;\r\n    }\r\n    \r\n    const createSkeletons = () => {\r\n        return Array.from(Array(n).keys()).map( i => {return(<DesignSkeleton key={`recent-design-skeleton-${ i }`}/>)});\r\n    };\r\n\r\n    const designList = () => {\r\n        return data.map((design) => <Design key={'recent' + design._id} title={design.metadata.name} {...design} canDelete={ false } />);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {\r\n                data && data.length !== 0 \r\n                    ? <div className={classes.title}>\r\n                    <Typography variant='h4'>\r\n                        Diseos recientes\r\n                    </Typography>\r\n                    <Divider />\r\n                </div>\r\n                    : <div></div>\r\n            }\r\n            {\r\n                data && data.length > 0 \r\n                    ? data.length > n ?\r\n                        <ScrollContainer className={classes.recentDesigns} style={{ cursor: 'grab' }}>\r\n                            {\r\n                                (isLoading) \r\n                                    ? createSkeletons()\r\n                                    : designList()\r\n                            }\r\n                        </ScrollContainer>\r\n                        :\r\n                        <div className={classes.recentDesigns}>\r\n                            {\r\n                                (isLoading) \r\n                                    ? createSkeletons()\r\n                                    : designList()\r\n                            }\r\n                        </div>\r\n                    : <div></div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n","import React, { useState } from 'react';\r\nimport {\r\n    Button,\r\n    makeStyles,\r\n    IconButton,\r\n    TextField,\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport { createFolder } from 'services/FolderService';\r\n\r\nimport { Close } from '@material-ui/icons';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    },\r\n    close: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    folderNameInput: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n    }\r\n}));\r\n\r\nexport const FolderModal = () => {\r\n\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { folderPath, folder, isFolderModalOpen } = uiState;\r\n    const queryClient = useQueryClient();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const [error, setError] = useState(null);\r\n    const [name, setName] = useState(folder.name);\r\n\r\n    const createFolderMutation = useMutation(createFolder, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries(['folders', folderPath]);            \r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries(['folders', folderPath]);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            handleCloseModal();\r\n        }\r\n    });\r\n\r\n    const handleChangeName = ({target}) => {\r\n        if(!!error) setError(null);\r\n        setName(target.value);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Folder',\r\n        });\r\n        dispatch({\r\n            type: types.ui.setFolder,\r\n            payload: {\r\n                _id: null,\r\n                name: '',\r\n            }\r\n        });\r\n        setError(null);\r\n    };\r\n\r\n    const handleCreateFolder = async (e) => {\r\n        if (name.trim() !== ''){\r\n            await createFolderMutation.mutate({path: folderPath, folderName: name});\r\n        } else {\r\n            setError('Este campo es obligatorio.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog fullWidth open={isFolderModalOpen} aria-labelledby=\"form-dialog-title\">\r\n            <div className={classes.title}>\r\n                <DialogTitle id=\"form-dialog-title\" onClose={handleCloseModal} >\r\n                    {\r\n                        !folder._id ? 'Nueva Carpeta' : 'Editar Carpeta'\r\n                    }\r\n                </DialogTitle>\r\n                <IconButton className={classes.close} aria-label=\"close\" onClick={handleCloseModal}>\r\n                    <Close />\r\n                </IconButton>\r\n            </div>\r\n            <DialogContent>\r\n                <Typography style={{marginBottom: 20}}>\r\n                    Usted est por { !folder._id ? 'crear' : 'editar' } una nueva carpeta.\r\n                    Por favor ingrese el { !folder._id ? '' : 'nuevo' } nombre para su carpeta en la siguiente entrada de texto.\r\n                </Typography>\r\n                <Typography variant='caption' >\r\n                    Importante: No puede existir una carpeta en el directorio con el mismo nombre.\r\n                </Typography>\r\n                <TextField \r\n                    className={classes.folderNameInput}\r\n                    error={!!error}\r\n                    helperText={error}\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    name=\"name\"\r\n                    value={name}\r\n                    onChange={handleChangeName}\r\n                    label=\"Nombre Carpeta\"\r\n                    type=\"text\"\r\n                    fullWidth\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleCloseModal}>\r\n                    Cancelar\r\n                </Button>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={handleCreateFolder}>\r\n                    Crear Carpeta\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { Button, ButtonGroup, Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { useInfiniteQuery, useMutation, useQuery, useQueryClient } from 'react-query';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport { createDesign, getDesignsByFolder } from 'services/DesignService';\r\nimport { getfolderByPath } from 'services/FolderService';\r\nimport { FoldersContainer } from 'components/FoldersContainer';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { DesignsBreadcrumbs } from 'pages/Navigation/MyDesigns/DesignsBreadcrumbs';\r\nimport { RecentDesigns } from 'pages/Navigation/MyDesigns/RecentDesigns';\r\nimport { FolderModal } from './FolderModal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    breadCrumbs: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n        width: '100%',\r\n        padding: '10px 15px 10px 15px',\r\n        borderRadius: 3,\r\n        backgroundColor: theme.palette.background.default\r\n    },\r\n    designsAndFoldersContainer: {\r\n        paddingTop: 15,\r\n    },\r\n    link: {\r\n        textDecoration: 'none',\r\n    },\r\n    sectionTitle: {\r\n        width: '100%',\r\n        display:'flex',\r\n        flexDirection: 'row',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between', \r\n        alignItems:'flex-end', \r\n        paddingBottom: 5,\r\n        [theme.breakpoints.down('xs')]:{\r\n            flexDirection: 'column',\r\n            alignItems: 'start',\r\n            justifyContent: 'center',\r\n        },\r\n    },\r\n    button: {\r\n        height: 35,\r\n    }\r\n\r\n}));\r\n\r\nexport const MyDesignsPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const urlparams = useParams();\r\n    const designsRef = useRef(null);\r\n    const { uiState, dispatch } = useUiState();\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n    const [width, setWidth] = useState(0);\r\n    const [height, setHeight] = useState(0);\r\n\r\n    useEffect(()=>{\r\n        dispatch({\r\n            type: types.ui.updateFolderPath,\r\n            payload: urlparams.urlPath ? '/' + urlparams.urlPath : '/',\r\n        });\r\n    }, [dispatch, urlparams]);\r\n\r\n    const path = uiState.folderPath;\r\n    const folderName = !urlparams.urlPath ? 'Mis Diseos' : path.split('/')[path.split('/').length - 1];\r\n\r\n    const designsQuery = useInfiniteQuery(['designs', path], async ({ pageParam = 0 }) => {\r\n        return await getDesignsByFolder(path, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const foldersQuery = useQuery(['folders', path], async () => {\r\n        return await getfolderByPath(path);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', path]);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', path]);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificacin o message para denotar el error.\r\n            console.log(error);\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (designsRef.current) {\r\n            setHeight(designsRef.current.offsetHeight);\r\n            setWidth(designsRef.current.offsetWidth);\r\n        }\r\n    }, [designsRef]);\r\n\r\n    const handleCreateDesign = async ( e, path = '/' ) => {\r\n        await createDesignMutation.mutate(path);\r\n    };\r\n\r\n    const handleOpenFolderModal = async (e) => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Folder'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} ref={designsRef} className={classes.workspace}>\r\n                    <DesignsBreadcrumbs />\r\n                    {\r\n                        path === '/' && <RecentDesigns id='recent' width={width} height={height} />\r\n                    }\r\n                    <div className={ classes.designsAndFoldersContainer }>\r\n                        <div className={classes.sectionTitle}>\r\n                            <Typography variant='h4'>\r\n                                {path === '/' ? 'Mis Diseos' : folderName}\r\n                            </Typography>\r\n                            <ButtonGroup className={classes.button}>\r\n                                <Button variant='outlined' fullWidth size='large' color='default' onClick={(e)=>handleCreateDesign(e, path)}> \r\n                                    Crear Diseo\r\n                                </Button>\r\n                                <Button variant='outlined' fullWidth size='large' color='default' onClick={handleOpenFolderModal}> \r\n                                    Crear Carpeta\r\n                                </Button>\r\n                            </ButtonGroup>\r\n                        </div>\r\n                        <Divider />\r\n                        <FoldersContainer {...foldersQuery}/>\r\n                        <DesignsContainer {...designsQuery} handleCreateDesign={(e)=>handleCreateDesign(e, path)}/>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n            <FolderModal />\r\n        </>\r\n    );\r\n};","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getUser = async ( id ) => {\r\n    const resp = await fetchWithToken(`user/${id}`);\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n\treturn resp.data;\r\n};\r\n\r\nexport const searchUsers = async ( filter, pageParam ) => {\r\n    const resp = await fetchWithToken('user/search/', {\r\n        filter,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n\treturn resp.data;\r\n};\r\n\r\nexport const updateContact = async(  {uid, contacts} ) => {\r\n    try {\r\n        const resp = await fetchWithToken(`user/${uid}`, { \r\n            newData: { contacts }\r\n         }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        }\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nexport const updateProfileInformation = async(  {uid, name, lastname, occupation, institution, country, city, description} ) => {\r\n    try {\r\n        const resp = await fetchWithToken(`user/${uid}`, { \r\n           newData: { uid, name, lastname, occupation, institution, country, city, description }\r\n        }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        }\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\n","\r\nimport React from 'react'\r\nimport { Avatar, Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, IconButton, makeStyles, TextField, Typography, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getUser, updateProfileInformation } from 'services/UserService';\r\nimport { useParams } from 'react-router';\r\nimport { useForm } from 'hooks/useForm';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    photoProfile: {\r\n        width: theme.spacing(30),\r\n        height: theme.spacing(30),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    errorContainer: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems:'center',\r\n    }\r\n\r\n}));\r\n\r\nexport const EditProfileModal = React.memo(() => {\r\n    const classes = useStyles();\r\n    const queryClient = useQueryClient();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { authState } = useAuthState();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    \r\n    const { isLoading, isError, data } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const [ formData, handleInputChange, reset] = useForm({\r\n        name: data.name,\r\n        lastname: data.lastname,\r\n        occupation: data.occupation,\r\n        institution: data.institution,\r\n        country: data.country,\r\n        city: data.city,\r\n        description: data.description,\r\n    });\r\n    \r\n    const { name, lastname, occupation, institution, country, city, description } = formData;\r\n\r\n    const updateProfileInformationMutation = useMutation(updateProfileInformation, {\r\n        onMutate: async () =>{\r\n            // Cancela consultas con la key especificada\r\n            await queryClient.cancelQueries(['user-profile', uid]);\r\n            // Guarda los datos antes de la eliminacin por si algo sale mal\r\n            const previousUserProfile = queryClient.getQueryData(['user-profile', uid]);\r\n            // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n            let keys = ['user-profile', uid]\r\n            queryClient.setQueryData(keys, oldData =>{\r\n                const newData = Object.assign({}, { ...oldData, uid, name, lastname, occupation, institution, country, city, description});\r\n                return newData;\r\n            });\r\n            // Retorna un contexto con los datos previos a la eliminacin para restaurar la consulta si es que algo sale mal\r\n            return { previousUserProfile };\r\n        },\r\n        // Si la mutacin falla, usa los datos previos desde el contexto retornado en onMutate para restaurar los datos\r\n        onError: (error, context) => {\r\n            // TODO: Emitir notificacin para retroalimentar\r\n            console.log(error);\r\n            queryClient.setQueryData(['user-profile', uid], context.previousUserProfile);\r\n        },\r\n        onSettled: () => {\r\n            // Invalida las queries para que todas las queries con estas keys se actualicen por cambios\r\n            queryClient.invalidateQueries(['user-profile', uid]);\r\n        },\r\n    });\r\n\r\n    if(isError){\r\n        return (<div className={ classes.errorContainer }>\r\n            <Alert severity='error' className={ classes.error }>\r\n                Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexin, por favor revise que su equipo tenga conexin a internet e intente ms tarde.\r\n                Si el problema persiste, por favor comunquese con el equipo de soporte.\r\n            </Alert>\r\n        </div>);\r\n    };\r\n\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n        reset();\r\n    };\r\n    \r\n    const handleSaveInformation = async (e) => {\r\n        e.preventDefault();\r\n        await updateProfileInformationMutation.mutate({uid: authState.user.uid, name, lastname, occupation, institution, country, city, description});\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n        enqueueSnackbar('Su perfil se ha guardado correctamente',  {variant: 'success', autoHideDuration: 2000},   );\r\n    };\r\n\r\n    return (\r\n        <>  \r\n            <Dialog onClose={handleClose} aria-labelledby='customized-dialog-title' open={uiState.isEditProfileModalOpen}>\r\n                <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n                    Editar perfil\r\n                    <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    <Grid container spacing={1}>\r\n                        \r\n                        <Grid container alignItems='center' justify='center'>\r\n                            <Avatar alt={data.name + ' ' + data.lastname} className={classes.photoProfile} src={ data.img ?? ''}/>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense' \r\n                                name='name' \r\n                                value={ name } \r\n                                onChange={ handleInputChange } \r\n                                label='Nombres' \r\n                                type='text' \r\n                                fullWidth \r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='lastname' \r\n                            value={ lastname } \r\n                            onChange={ handleInputChange } \r\n                            label='Apellidos' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='country' \r\n                            value={ country ?? '' } \r\n                            onChange={ handleInputChange } \r\n                            label='Pas' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='city' \r\n                            value={ city ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Ciudad' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='occupation' \r\n                            value={ occupation ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Ocupacin' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='institution' \r\n                            value={ institution ?? '' } \r\n                            onChange={ handleInputChange } \r\n                            label='Institucin' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                        <TextField\r\n                            multiline \r\n                            variant='outlined'\r\n                            margin='dense'\r\n                            name='description'\r\n                            rows={4} \r\n                            value={ description ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Descripcin' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleSaveInformation}>\r\n                        Guardar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n});\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Avatar, makeStyles, Typography } from '@material-ui/core';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        padding: 5,\r\n        borderRadius: 10,\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        marginTop: 10,\r\n        cursor: 'pointer',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            zIndex: 0.5,\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    card: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        //backgroundColor: 'grey',\r\n    },\r\n    body: {\r\n        display: 'flex',\r\n        marginLeft: 10,\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    photo: {\r\n        margin: 10,\r\n        width: theme.spacing(8),\r\n        height: theme.spacing(8),\r\n    },\r\n    name: {\r\n\r\n    },\r\n    location: {\r\n\r\n    }\r\n}));\r\n\r\nexport const UserCard = ({ _id, name, lastname, city, country, scoreMean, img, occupation, onClick }) => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    const handleViewUser = (e, id) => {\r\n        e.stopPropagation();\r\n        if(onClick) onClick();\r\n        history.push(`/profile/${id}`);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root} onClick={ ( e ) => handleViewUser(e, _id) }>\r\n            <div className={classes.card}>\r\n                <Avatar\r\n                    className={ classes.photo }\r\n                    alt={ formatName(name, lastname) }\r\n                    src={ img ?? '' }\r\n                >\r\n                    <Typography variant='h5'>\r\n                        { getUserInitials(name, lastname) }\r\n                    </Typography>\r\n                </Avatar>\r\n                <div className={classes.body} >\r\n                    <div className={classes.name}>\r\n                        <Typography variant='h5' color='textPrimary'>\r\n                            {name + ' ' + lastname}\r\n                        </Typography>\r\n                    </div>\r\n                    <div className={classes.location}>\r\n                        <Typography variant='subtitle1' color='textSecondary'>\r\n                            {\r\n                                city && country \r\n                                    ? city + ', ' + country\r\n                                    : city ?? country ?? 'Sin locacin'\r\n                            }\r\n                        </Typography>\r\n                    </div>\r\n                    <div >\r\n                        <Typography variant='subtitle1' color='textSecondary'>\r\n                            {\r\n                                occupation\r\n                                    ? occupation\r\n                                    : 'Sin ocupacin'\r\n                            }\r\n                        </Typography>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { getUser } from 'services/UserService';\r\nimport { useQuery } from 'react-query';\r\nimport { useParams } from 'react-router';\r\nimport { UserCard } from 'components/UserCard';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\nexport const ShowContactsModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n\r\n    const { data } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n    \r\n    const contactList = () => {\r\n        return data.contacts.map(( contact ) => {\r\n            return <UserCard key={contact._id} {...contact} onClick={handleClose}/>\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n    };\r\n    return (\r\n        <>  \r\n            <Dialog onClose={handleClose} aria-labelledby='customized-dialog-title' open={uiState.isContactsModalOpen}>\r\n                <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n                    Contactos\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    { contactList() }\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cerrar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Grid, Typography, Avatar, makeStyles, Button, Divider, IconButton, } from '@material-ui/core';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getUser, updateContact } from 'services/UserService';\r\nimport { useQuery, useMutation, useQueryClient, useInfiniteQuery } from 'react-query';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { Star, Apartment, Group, Email, PersonAdd, Edit, Close } from '@material-ui/icons';\r\nimport { Alert } from '@material-ui/lab';\r\n\r\n\r\nimport { EditProfileModal } from 'pages/User/UserProfile/EditProfileModal';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ShowContactsModal } from 'pages/User/UserProfile/ShowContactsModal';\r\n\r\nimport { createDesign, getPublicDesignsByUser } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    designPanel:{\r\n        flexDirection: 'column',\r\n        borderLeft:`1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    photoProfile: {\r\n        width: theme.spacing(30),\r\n        height: theme.spacing(30),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    spaceFirstDataFirstData:{ \r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    centerGrid:{\r\n        display: 'flex',\r\n        alignItems: 'center', \r\n        justifyItems:'center',\r\n    },\r\n    spaceSecondData:{\r\n        marginBottom: theme.spacing(2),   \r\n    },\r\n    spaceData:{\r\n        marginLeft: theme.spacing(5),\r\n        marginBottom: theme.spacing(2),\r\n        marginRight: theme.spacing(5),\r\n    },\r\n    spaceDesign:{\r\n        marginLeft: theme.spacing(7),\r\n        marginTop: theme.spacing(2),\r\n        marginRight: theme.spacing(7) \r\n    },\r\n    spaceIcons:{\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    errorContainer: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems:'center',\r\n    }\r\n}));\r\n\r\nexport const UserProfile = () => {\r\n    \r\n    const classes = useStyles();\r\n    const queryClient = useQueryClient();\r\n    const { authState, setAuthState } = useAuthState();\r\n    const { dispatch } = useUiState();\r\n    const history = useHistory();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n\r\n    const { isLoading, isError, data, error, refetch } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const designsQuery = useInfiniteQuery([ uid, 'user-public-designs' ], async ({ pageParam = 0 }) => {\r\n        return await getPublicDesignsByUser(uid, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n    \r\n    const updateConctactMutation = useMutation(updateContact, {\r\n        onSuccess: (data, {uid, contacts}, context) => {\r\n            setAuthState((prevState)=>({\r\n                ...prevState, \r\n                user: Object.assign({}, {...prevState.user, contacts})\r\n            }));\r\n            queryClient.invalidateQueries(['user-profile', uid]);\r\n        }\r\n    });\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries('designs');\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries('designs');\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificacin o message para denotar el error.\r\n            console.log(error);\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    const handleCreateDesign = async () => {\r\n        await createDesignMutation.mutate({ path: '/', isPublic: true });\r\n    };\r\n\r\n    if(isError){\r\n        return (<div className={ classes.errorContainer }>\r\n            <Alert severity='error' className={ classes.error }>\r\n                Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexin, por favor revise que su equipo tenga conexin a internet e intente ms tarde.\r\n                Si el problema persiste, por favor comunquese con el equipo de soporte.\r\n            </Alert>\r\n        </div>);\r\n    };\r\n\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const handleEditProfile = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n    };\r\n\r\n    const handleShowContacts = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n    };\r\n\r\n    const handleAddContact = async (e) => {\r\n        e.preventDefault();\r\n        await updateConctactMutation.mutate({uid: authState.user.uid, contacts:[...authState.user.contacts, uid]});\r\n        queryClient.invalidateQueries(['user-profile', uid]);\r\n        await refetch();\r\n    };\r\n\r\n    const handleDeleteContact = async (e) =>{\r\n        e.preventDefault();\r\n        await updateConctactMutation.mutate({uid: authState.user.uid, contacts: authState.user.contacts.filter(contact=>contact!==uid)});\r\n        queryClient.invalidateQueries(['user-profile', uid]);\r\n    };\r\n    \r\n    if(isError){\r\n        return (<Typography>Error: {error.message}</Typography>);\r\n    };\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item xs={12} sm={3}>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    <Avatar alt={data.name + ' ' + data.lastname} className={classes.photoProfile} src={ data.img ?? ''}/>\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    { data && <Typography  align='center' variant='h5' component='h2'>{data.name + ' ' + data.lastname}</Typography>}\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    { data && data.occupation && <Typography className={classes.spaceFirstData} color='textSecondary'>{data.occupation}</Typography>}\r\n                </Grid> \r\n                <Grid container alignItems='center' justify='center' className={classes.spaceFirstData}>\r\n                    <Grid item >\r\n                        { data.contacts.length > 0 ? \r\n                            <IconButton onClick={ handleShowContacts }>\r\n                                <Group />\r\n                            </IconButton>\r\n                            :\r\n                            <Group />\r\n                        }\r\n                    </Grid>\r\n                    <Grid item >\r\n                        <Typography style={{ marginLeft: 8 }}> {data.contacts.length}</Typography>\r\n                    </Grid>\r\n                    \r\n                    <Grid item >\r\n                    <Star/>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Typography style={{ marginLeft: 8 }}> {data.scoreMean}</Typography>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center' className={classes.spaceSecondData}>\r\n                    {(authState.user.uid===uid) ? \r\n                        <Button variant ='outlined' size='small' onClick={handleEditProfile} startIcon={<Edit />}>Editar perfil</Button> \r\n                        :\r\n                        (authState.user.contacts.includes(uid)) ? \r\n                        <Button variant ='outlined' size='small' onClick={handleDeleteContact} startIcon={<Close />}>Eliminar de mis contactos</Button> \r\n                        : \r\n                        <Button variant ='outlined' size='small' onClick={handleAddContact} startIcon={<PersonAdd />} >Agregar a mis contactos</Button>}  \r\n                </Grid>\r\n                <Divider className={classes.spaceData}/>\r\n                <Grid className={classes.spaceData}>\r\n                    { data && data.institution && (\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <Apartment className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.institution}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    { data && data.city && data.country &&(\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <RoomIcon className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.city + ', ' + data.country}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    { data && (\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <Email className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.email}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    <Divider className={classes.spaceSecondData}/>\r\n                    { data && data.description &&(\r\n                        <>\r\n                            <Typography color='textSecondary' className={classes.spaceSecondData}>\r\n                                Descripcin\r\n                            </Typography>\r\n                            <Typography >\r\n                                {data.description}\r\n                            </Typography> \r\n                        </>\r\n                    )}\r\n                </Grid>\r\n            </Grid>\r\n            <Grid item xs={12} sm={9} className={classes.designPanel}>\r\n               \r\n                <Grid className={classes.spaceDesign}>\r\n                    <Typography variant='h4'>\r\n                        Diseos Pblicos\r\n                    </Typography>\r\n                    <Divider />\r\n                    {   \r\n                        (authState.user.uid === uid) && \r\n                            <>\r\n                                <EditProfileModal /> \r\n                            </> \r\n                    }\r\n                    <ShowContactsModal/> \r\n                    <DesignsContainer {...designsQuery} label='user-profile' handleCreateDesign={handleCreateDesign}/>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n","import { ThemeProvider } from '@material-ui/core';\r\nimport React, { useState, useContext, createContext, useEffect } from 'react';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getTheme } from 'theme/theme';\r\n\r\nconst UserConfigContext = createContext();\r\n\r\nexport function useUserConfigState() {\r\n\tconst context = useContext(UserConfigContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useUserConfigState must be used within a UserConfigProvider');\r\n\t}\r\n\treturn context;\r\n}\r\n\r\nexport const UserConfigProvider = ({ children })=>{\r\n\tconst { authState } = useAuthState();\r\n    const [userConfig, setUserConfig] = useState({\r\n        darkTheme:false,\r\n        modeAdvanced: false\r\n\t});\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst darkTheme = JSON.parse(localStorage.getItem('darkTheme'));\r\n\t\tif(darkTheme !== null ){\r\n\t\t\tsetUserConfig((prevState)=>({\r\n\t\t\t\t...prevState,\r\n\t\t\t\tdarkTheme,\r\n\t\t\t}));\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n        if(authState.user !== null){\r\n            localStorage.setItem('darkTheme', JSON.stringify(userConfig.darkTheme));\r\n        }  \r\n    }, [authState.user, userConfig.darkTheme]);\r\n\r\n\tconst theme = getTheme(userConfig.darkTheme);\r\n\r\n\treturn (\r\n\t\t<UserConfigContext.Provider value={ { userConfig, setUserConfig } }>\r\n\t\t\t<ThemeProvider theme = {theme}>\r\n\t\t\t\t{ children }\r\n\t\t\t</ThemeProvider>\r\n\t\t</UserConfigContext.Provider>\r\n\t);\r\n}","import { createMuiTheme } from '@material-ui/core';\r\nimport {\r\n  orange,\r\n  lightBlue,\r\n  deepPurple,\r\n  deepOrange\r\n} from \"@material-ui/core/colors\";\r\n\r\nexport const getTheme = ( isDarkActive ) =>{\r\n    const theme = createMuiTheme({\r\n        palette: {\r\n          type: isDarkActive ? 'dark': 'light',\r\n          primary: {\r\n            dark: orange[500], \r\n            light: lightBlue[500],\r\n            main: isDarkActive? orange[500] : lightBlue[500],\r\n          },\r\n          secondary: {\r\n            dark: deepOrange[900],\r\n            light: deepPurple[500], \r\n            main: isDarkActive? deepOrange[900]: deepPurple[500], \r\n          },\r\n          text:{\r\n            primary: isDarkActive? '#F4F4F4': '#36393F',\r\n          },\r\n          background:{\r\n            default: isDarkActive? '#36393F': '#F4F4F4', //SidePanels,\r\n            paper: isDarkActive? '#36393F': '#F4F4F4', // Menu, Login and Register Modal\r\n            workSpace: isDarkActive? '#2F3136': '#FEFEFE',\r\n            navbar: isDarkActive? '#202225': '#DCDCDC',\r\n            design: isDarkActive? '#36393F': '#F4F4F4',\r\n            designHover: isDarkActive? '#393D46': '#F6F6F6',\r\n          }\r\n        },\r\n    });\r\n    return theme;\r\n}","import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useQueryClient } from 'react-query';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Search } from '@material-ui/icons';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { Avatar, Typography, Toolbar, AppBar, Button, ButtonGroup, IconButton, Menu, MenuItem, Switch, FormControlLabel, OutlinedInput, Box } from '@material-ui/core';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        color: theme.palette.text.primary\r\n    },\r\n    logo: {\r\n        width: theme.spacing(5),\r\n        height: theme.spacing(5),\r\n        //margin: 'auto',\r\n    },\r\n    brand: {\r\n        display: \"flex\",\r\n        alignItems: 'center',\r\n        textDecoration: 'none',\r\n        marginLeft: 5,\r\n        marginRight: 5,\r\n        [theme.breakpoints.down('xs')]:{\r\n            marginTop: 20,\r\n            marginBottom: 10,\r\n        },\r\n    },\r\n    search: {\r\n        marginLeft: 5,\r\n        marginRight: 5,\r\n        [theme.breakpoints.down('xs')]:{\r\n            marginTop: 5,\r\n            marginBottom: 5,\r\n        },\r\n    },\r\n    searchForm: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    userAndOptions: {\r\n        marginLeft: 5,\r\n        marginRight: 5,\r\n        [theme.breakpoints.down('xs')]:{\r\n            marginTop: 5,\r\n            marginBottom: 10,\r\n        },\r\n    },\r\n    navbarColor: {\r\n        background: theme.palette.background.navbar,\r\n    },\r\n    navbarLetter: {\r\n        textDecoration: 'none',\r\n        color: theme.palette.text.primary,\r\n        cursor: 'pointer'\r\n    },\r\n    menuColor: {\r\n        background: theme.palette.background.menu\r\n    },\r\n    toolbar: {\r\n        display: 'flex', \r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        [theme.breakpoints.down('xs')]:{\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n        },\r\n        [theme.breakpoints.up('sm')]:{\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between',\r\n        },\r\n    }\r\n}));\r\n\r\nexport const NavBar = () => {\r\n    const queryClient = useQueryClient();\r\n    const history = useHistory();\r\n    const [isMenuOpen, setMenuOpen] = useState(null);\r\n    const { userConfig, setUserConfig } = useUserConfigState();\r\n    const { dispatch } = useUiState();\r\n    const { authState, logout } = useAuthState();\r\n    const [filter, setFilter] = useState('');\r\n\r\n    const handleLogout = () => {\r\n        queryClient.clear();\r\n        setMenuOpen(null);\r\n        logout();\r\n    };\r\n\r\n    const handleOpenLoginModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n    };\r\n\r\n    const handleOpenRegisterModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setMenuOpen(null);\r\n    };\r\n\r\n    const handleChangeUserConfig = (event) => {\r\n        setUserConfig({ ...userConfig, [event.target.name]: event.target.checked });\r\n    };\r\n\r\n    const handleInputFormChange = ({ target }) => {\r\n        setFilter(target.value);\r\n    };\r\n\r\n    const handleSearchUsers = async (e) => {\r\n        e.preventDefault();\r\n        if(filter.trim().length > 0) {\r\n            history.push(`/users/search?q=${filter.trim()}`);\r\n            setFilter('');\r\n        }\r\n    };\r\n\r\n    const handleMenu = ( e ) => {\r\n        setMenuOpen(e.currentTarget);\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"static\" className={classes.navbarColor} elevation={0}>\r\n                <Toolbar className={classes.toolbar}>\r\n                    <Box className={classes.brand} component={Link} to='/'>\r\n                        <Avatar className={classes.logo} src={Logo} alt=\"Logo\" />\r\n                        <Typography variant=\"h6\" className={classes.title}>\r\n                            LAD\r\n                        </Typography>\r\n                    </Box>\r\n                    {\r\n                        (!authState.token) ?\r\n                            <ButtonGroup variant=\"text\" aria-label=\"text primary button group\">\r\n                                <Button onClick={handleOpenLoginModal} >\r\n                                    Ingresar\r\n                                    </Button>\r\n                                <Button onClick={handleOpenRegisterModal}>\r\n                                    Registrarme\r\n                                    </Button>\r\n                            </ButtonGroup>\r\n                            :\r\n                            <>\r\n                                <div className={classes.search}>\r\n                                    <form className={classes.searchForm} onSubmit={handleSearchUsers} noValidate>\r\n                                        <OutlinedInput\r\n                                            margin='dense'\r\n                                            variant=\"outlined\"\r\n                                            name=\"filter\"\r\n                                            value={filter}\r\n                                            type=\"text\"\r\n                                            placeholder='Buscar usuario'\r\n                                            onChange={handleInputFormChange}\r\n                                        />\r\n                                        <IconButton type=\"submit\" className={classes.iconButton} aria-label=\"search\">\r\n                                            <Search />\r\n                                        </IconButton>\r\n                                    </form>\r\n                                </div>\r\n                                <div className={classes.userAndOptions} style={{ display: 'flex', alignItems: 'center' }}>\r\n                                    <Typography className={classes.navbarLetter}  component={Link} to={`/profile/${authState.user.uid}`} >\r\n                                        { authState.user.name }\r\n                                    </Typography>\r\n                                    <IconButton onClick={ handleMenu }>\r\n                                        <SettingsIcon />\r\n                                    </IconButton>\r\n                                </div>\r\n                                <Menu\r\n                                    anchorEl={isMenuOpen}\r\n                                    open={Boolean(isMenuOpen)}\r\n                                    anchorOrigin={{\r\n                                        vertical: 'top',\r\n                                        horizontal: 'right',\r\n                                    }}\r\n                                    keepMounted\r\n                                    transformOrigin={{\r\n                                        vertical: 'top',\r\n                                        horizontal: 'right',\r\n                                    }}\r\n                                    onClose={handleClose}\r\n\r\n                                >\r\n                                    <MenuItem>\r\n                                        <FormControlLabel\r\n                                            control={<Switch checked={userConfig.darkTheme} onChange={handleChangeUserConfig} name=\"darkTheme\" />}\r\n                                            label=\"Tema Oscuro\"\r\n                                        />\r\n                                    </MenuItem>\r\n                                    <MenuItem>\r\n                                        <FormControlLabel\r\n                                            control={<Switch checked={userConfig.modeAdvanced} onChange={handleChangeUserConfig} name=\"modeAdvanced\" />}\r\n                                            label=\"Modo Avanzado\"\r\n                                        />\r\n                                    </MenuItem>\r\n                                    <MenuItem>\r\n                                        <Button color=\"primary\" onClick={handleLogout}>\r\n                                            Cerrar sesin\r\n                                        </Button>\r\n                                    </MenuItem>\r\n\r\n                                </Menu>\r\n                            </>\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n    );\r\n}","import {  Typography, Toolbar, AppBar, Container, makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    pos:{\r\n        width: 'fit-content',\r\n    }\r\n    \r\n  }));\r\nexport const Footer = () =>{\r\n    const classes = useStyles();\r\n    return (\r\n        <AppBar position=\"static\" color=\"default\"> \r\n          <Container maxWidth=\"md\" className={classes.pos}>\r\n            <Toolbar>\r\n              <Typography variant=\"body1\">\r\n                 2021 Universidad Catlica de Temuco\r\n              </Typography>\r\n            </Toolbar>\r\n          </Container>\r\n        </AppBar>\r\n    )\r\n};","import React from 'react';\r\nimport { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { useInfiniteQuery } from 'react-query';\r\nimport { getDesignsSharedWithMe } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingTop: 20,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon:{\r\n        marginRight: 10,\r\n    }\r\n}));\r\n\r\nexport const SharedWithMePage = () => {\r\n    const classes = useStyles();\r\n\r\n    const sharedDesignsQuery = useInfiniteQuery(['shared-designs'], async ({ pageParam = 0 }) => {\r\n        return await getDesignsSharedWithMe(pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                        <Typography variant='h4' style={{marginBottom: 5}}>Compartidos conmigo</Typography>\r\n                        <Divider />\r\n                        <DesignsContainer {...sharedDesignsQuery} label='shared-with-me'/>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n        </>\r\n    );\r\n};","import React from 'react';\r\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon:{\r\n        marginRight: 10,\r\n    }\r\n}));\r\n\r\nexport const PublicRepositoryPage = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                        <Typography variant='h4'>Repositorio Pblico</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n        </>\r\n    );\r\n};","import React from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useInfiniteQuery } from 'react-query';\r\nimport queryString from 'query-string';\r\nimport { Button, Divider, Grid, List, ListItem, ListItemText, makeStyles, Typography } from '@material-ui/core';\r\nimport { Group, Home, Public } from '@material-ui/icons';\r\nimport { searchUsers } from 'services/UserService';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { UserCard } from 'components/UserCard';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        paddingBottom: 50,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    usersContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        paddingTop: 15,\r\n    },\r\n    errorContainer: {\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n        alignItems:'center',\r\n    },\r\n    loadMore: {\r\n        marginTop: 50,\r\n    }\r\n}));\r\n\r\nexport const SearchUsersPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const { q } = queryString.parse(location.search);\r\n    \r\n    const redirectTo = (path) => {\r\n        history.push(path);\r\n    };\r\n\r\n    const { data, status, error, isFetchingNextPage, fetchNextPage, hasNextPage } = useInfiniteQuery('search-users', async ({ pageParam = 0 }) => {\r\n        return await searchUsers(q, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const userList = () => {\r\n        return data.pages.map((page, index) => {\r\n            return page.users.map((user, i) => <UserCard key={user._id} {...user}/>);\r\n        });\r\n    };\r\n\r\n    if(!q){\r\n        return (\r\n            <div className={ classes.errorContainer }>\r\n                <Alert severity='error' className={classes.error}>\r\n                    No se ha ingresado filtro para la bsqueda de usuarios. Por favor ingrese informacin en la entrada de texto de la barra de navegacin para buscar usuarios\r\n                    y presione 'enter' o el cono de bsqueda.\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return status === 'loading' ? (\r\n        <p>Loading...</p>\r\n    ) : status === 'error' ? (\r\n        <Alert severity='error' className={classes.error}>\r\n            { error.message }\r\n        </Alert>\r\n    ) : (\r\n            <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                        <ListItem button onClick={() => redirectTo('/my-designs')}>\r\n                            <Home className={classes.icon} />\r\n                            <ListItemText primary=\"Mis Diseos\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                        <ListItem button onClick={() => redirectTo('/shared-with-me')}>\r\n                            <Group className={classes.icon} />\r\n                            <ListItemText primary=\"Compartidos Conmigo\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                        <ListItem button onClick={() => redirectTo('/public-repository')}>\r\n                            <Public className={classes.icon} />\r\n                            <ListItemText primary=\"Repositorio Pblico\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                    </List>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div style={{paddingTop: 15}}>\r\n                        {\r\n                            data.pages[0].users.length > 0 \r\n                                ? (<><Typography variant='h4'>\r\n                                        Usuarios encontrados\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                    <div className={ classes.usersContainer }>\r\n                                        { userList() }\r\n                                        {\r\n                                            data && hasNextPage && <Button className={classes.loadMore} color='primary' onClick={() => fetchNextPage()}>\r\n                                                    {\r\n                                                        isFetchingNextPage\r\n                                                            ? 'Cargando ms...'\r\n                                                            : 'Cargar Ms'\r\n                                                    }\r\n                                                </Button>\r\n                                        }\r\n                                    </div></>)\r\n                                : <Alert severity='error' className={classes.error}>\r\n                                    No se han encontrado coincidencias.\r\n                                </Alert>\r\n\r\n                        }\r\n                        \r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","import types from \"types\";\r\n\r\n\r\nexport const designReducer = ( state, action ) => {\r\n    switch (action.type) {\r\n        case types.design.updateDesign:\r\n            return {\r\n                ...state,\r\n                design: action.payload,\r\n            };\r\n        case types.design.changeMetadataField:\r\n            if(action.payload.subfield !== null){\r\n                return {\r\n                    ...state,\r\n                    design: {\r\n                        ...state.design,\r\n                        metadata: {\r\n                            ...state.design.metadata,\r\n                            [action.payload.field]: {\r\n                                ...state.design.metadata[action.payload.field],\r\n                                [action.payload.subfield]: action.payload.value,\r\n                            },\r\n                        }\r\n                    }\r\n                }\r\n            } else{\r\n                return {\r\n                    ...state,\r\n                    design: {\r\n                        ...state.design,\r\n                        metadata: {\r\n                            ...state.design.metadata,\r\n                            [action.payload.field]: action.payload.value,\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        case types.design.changeTaskField:\r\n            const learningActivities = state.design.data.learningActivities;\r\n            if (action.payload.subfield !== null) learningActivities[action.payload.learningActivityIndex].tasks[action.payload.index][action.payload.field][action.payload.subfield] = action.payload.value;\r\n            else learningActivities[action.payload.learningActivityIndex].tasks[action.payload.index][action.payload.field] = action.payload.value;\r\n            // learningActivities: [...learningActivities.slice(0, learningActivityIndex), learningActivities[learningActivityIndex].task[], ...learningActivities.slice(learningActivityIndex)] \r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    data: {\r\n                        ...state.design.data,\r\n                        learningActivities,\r\n                    }\r\n                }\r\n            }\r\n            /*if(action.payload.subfield !== null){\r\n                return {\r\n                    ...state,\r\n                    design: {\r\n                        ...state.design,\r\n                        data: {\r\n                            ...state.design.data,\r\n                            learningActivities: state.design.data.learningActivities.map(((learningActivity, index) => {\r\n                                if (index === action.payload.learningActivityIndex) {\r\n                                    learningActivity.tasks = learningActivity.tasks.map((task, index) => {\r\n                                        if (index === action.payload.index){\r\n                                            task[action.payload.field][action.payload.subfield] = action.payload.value;\r\n                                        }\r\n                                        return task;\r\n                                    })\r\n                                }\r\n                                return learningActivity;\r\n                            }))\r\n                        }\r\n                    }\r\n                }\r\n            } else{\r\n                return {\r\n                    ...state,\r\n                    design: {\r\n                        ...state.design,\r\n                        data: {\r\n                            ...state.design.data,\r\n                            learningActivities: state.design.data.learningActivities.map(((learningActivity, index) => {\r\n                                if (index === action.payload.learningActivityIndex) {\r\n                                    learningActivity.tasks.map((task, index) => {\r\n                                        if (index === action.payload.index){\r\n                                            task[action.payload.field] = action.payload.value;\r\n                                        }\r\n                                        return task;\r\n                                    })\r\n                                }\r\n                                return learningActivity;\r\n                            }))\r\n                        }\r\n                    }\r\n                }\r\n            }*/\r\n        case types.design.setCurrentLearningResultField:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: {\r\n                    ...state.currentLearningResult,\r\n                    [action.payload.field]: action.payload.value,\r\n                }\r\n            }\r\n        case types.design.clearCurrentLearningResult:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: {\r\n                    category: null,\r\n                    verb: null,\r\n                    description: null,\r\n                    editing: false,\r\n                    index: null,\r\n                }\r\n            }\r\n        case types.design.setCurrentLearningResult:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: action.payload\r\n            }\r\n        case types.design.setBloomCategories:\r\n            return {\r\n                ...state,\r\n                bloomCategories: action.payload\r\n            }\r\n        case types.design.setBloomVerbs:\r\n            return {\r\n                ...state,\r\n                bloomVerbs: action.payload\r\n            }\r\n        case types.design.setDesignPrivileges:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    privileges: action.payload\r\n                }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import React, { useContext, createContext, useReducer } from 'react';\r\nimport { designReducer } from 'contexts/design/designReducer';\r\n\r\nconst DesignContext = createContext();\r\n\r\nexport function useDesignState() {\r\n\tconst context = useContext(DesignContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useDesignState must be used within a DesignProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n\tdesign: null,\r\n\tcurrentLearningResult: {\r\n\t\tcategory: null,\r\n\t\tverb: null,\r\n\t\tdescription: null,\r\n\t\tediting: false,\r\n\t\tindex: null,\r\n\t},\r\n\tbloomCategories: [],\r\n\tbloomVerbs: [],\r\n};\r\n\r\nexport const DesignProvider = ({ children }) => {\r\n\r\n\tconst [ designState, dispatch ] = useReducer(designReducer, initialState);\r\n\r\n\treturn (\r\n\t\t<DesignContext.Provider value={ { designState, dispatch } }>\r\n\t\t\t{ children }\r\n\t\t</DesignContext.Provider>\r\n\t);\r\n};\r\n","import React, { createContext, useCallback, useContext, useState } from 'react';\r\nimport * as Y from 'yjs';\r\nimport { WebsocketProvider } from 'y-websocket';\r\nimport { useAuthState } from './AuthContext';\r\n\r\nconst SharedDocContext = createContext();\r\n\r\nexport function useSharedDocContext() {\r\n    const context = useContext(SharedDocContext);\r\n    if (context === undefined) {\r\n        throw new Error('SharedDocContext must be used within a SharedDocProvider');\r\n    }\r\n    return context;\r\n}\r\n\r\nexport const SharedDocProvider = ({ children }) => {\r\n    const [doc, setDoc] = useState(null);\r\n    const [provider, setProvider] = useState(null);\r\n    const [user, setUser] = useState(null);\r\n    const { authState } = useAuthState();\r\n\r\n    const connectToDesign = useCallback(\r\n        ( id ) => {\r\n            if (provider) return false;\r\n            if (!authState.user) return false;\r\n            const colors = [\r\n                '#30bced',\r\n                '#6eeb83',\r\n                '#ffbc42',\r\n                '#ecd444',\r\n                '#ee6352',\r\n                '#9ac2c9',\r\n                '#8acb88',\r\n                '#1be7ff'\r\n            ];\r\n            const yDoc = new Y.Doc({guid: id});\r\n            setDoc(yDoc);\r\n            setProvider(new WebsocketProvider(process.env.REACT_APP_Y_WEBSOCKET_SERVER, id, yDoc));\r\n            setUser({\r\n                name: authState.user.name,\r\n                color: colors[Math.floor(Math.random() * colors.length)],\r\n            });\r\n        },\r\n        [provider, authState.user],\r\n    );\r\n\r\n    const clearDoc = useCallback(\r\n        () => {\r\n            setDoc(null);\r\n            setProvider(null);\r\n            setUser(null);\r\n        },\r\n        [setDoc, setProvider, setUser],\r\n    );\r\n\r\n    return (\r\n        <SharedDocContext.Provider value={{\r\n            doc,\r\n            provider,\r\n            connectToDesign,\r\n            clearDoc,\r\n            user,\r\n        }}>\r\n            {children}\r\n        </SharedDocContext.Provider>\r\n    );\r\n}","import { Extension } from '@tiptap/core'\r\nimport { Decoration, DecorationSet } from 'prosemirror-view'\r\nimport { Plugin } from 'prosemirror-state'\r\n\r\nexport default Extension.create({\r\n  name: 'placeholder',\r\n\r\n  defaultOptions: {\r\n    emptyEditorClass: 'is-editor-empty',\r\n    emptyNodeClass: 'is-empty',\r\n    placeholder: 'Placeholder',\r\n    showOnlyWhenEditable: true,\r\n    showOnlyCurrent: true,\r\n  },\r\n\r\n  addProseMirrorPlugins() {\r\n    return [\r\n      new Plugin({\r\n        props: {\r\n          decorations: ({ doc, selection }) => {\r\n            const active = this.editor.isEditable || !this.options.showOnlyWhenEditable\r\n            const { anchor } = selection\r\n            const decorations = []\r\n            const isEditorEmpty = doc.textContent.length === 0\r\n\r\n            if (!active) {\r\n              return\r\n            }\r\n\r\n            doc.descendants((node, pos) => {\r\n              const hasAnchor = anchor >= pos && anchor <= (pos + node.nodeSize)\r\n              // TODO: should be false for image nodes (without text content), is true though\r\n              const isNodeEmpty = node.content.size === 0\r\n\r\n              if ((hasAnchor || !this.options.showOnlyCurrent) && isNodeEmpty) {\r\n                const classes = [this.options.emptyNodeClass]\r\n\r\n                if (isEditorEmpty) {\r\n                  classes.push(this.options.emptyEditorClass)\r\n                }\r\n\r\n                const decoration = Decoration.node(pos, pos + node.nodeSize, {\r\n                  class: classes.join(' '),\r\n                  'data-empty-text': typeof this.options.placeholder === 'function'\r\n                    ? this.options.placeholder(node)\r\n                    : this.options.placeholder,\r\n                })\r\n                decorations.push(decoration)\r\n              }\r\n\r\n              return false\r\n            })\r\n\r\n            return DecorationSet.create(doc, decorations)\r\n          },\r\n        },\r\n      }),\r\n    ]\r\n  },\r\n})","import { useEffect, useState, useCallback, forwardRef, useImperativeHandle } from 'react'\r\nimport { Editor } from '@tiptap/core'\r\nimport Collaboration from '@tiptap/extension-collaboration'\r\nimport CollaborationCursor from '@tiptap/extension-collaboration-cursor'\r\nimport { EditorContent } from '@tiptap/react'\r\nimport { useSharedDocContext } from 'contexts/SharedDocContext'\r\nimport './sharedTextField.css';\r\nimport { Box, ButtonBase, Divider, makeStyles } from '@material-ui/core'\r\nimport Document from '@tiptap/extension-document'\r\nimport Paragraph from '@tiptap/extension-paragraph'\r\nimport Text from '@tiptap/extension-text'\r\nimport Placeholder from './PlaceHolder'\r\nimport CharacterCount from '@tiptap/extension-character-count'\r\nimport { ArrowDropUp, ArrowDropDown } from '@material-ui/icons'\r\n\r\nfunction htmlToText(htmlString) {\r\n    var span = document.createElement('span');\r\n    span.innerHTML = htmlString;\r\n    return span.textContent || span.innerText;\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: ({ multiline, rowMax, focused }) => ({\r\n        width: '100%',\r\n        display: 'flex',\r\n    }),\r\n    inputContainer: ({ multiline, rowMax, focused, type }) => ({\r\n        width: '100%',\r\n        cursor: 'text',\r\n        height: multiline && rowMax === 1 ? 'auto' : `calc(22px * ${rowMax} + 38px)`,\r\n        overflow: 'auto',\r\n        borderWidth: !focused ? 1 : 2,\r\n        borderStyle: 'solid',\r\n        borderColor: !focused ? theme.palette.action.disabled : theme.palette.primary.main,\r\n        borderRadius: theme.shape.borderRadius,\r\n        borderTopRightRadius: type === 'number' ? 0 : theme.shape.borderRadius,\r\n        borderBottomRightRadius: type === 'number' ? 0 : theme.shape.borderRadius,\r\n        '&:hover': {\r\n            borderColor: !focused ? theme.palette.action.active : theme.palette.primary.main,\r\n        },\r\n        '&:focus': {\r\n            borderColor: !focused ? theme.palette.primary.light : theme.palette.primary.main,\r\n        }\r\n    }),\r\n    actions: () => ({\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: 70,\r\n        justifyContent: 'space-between',\r\n        borderWidth: 1,\r\n        borderStyle: 'solid',\r\n        borderLeftStyle: 'none',\r\n        borderColor: theme.palette.action.disabled,\r\n        borderTopRightRadius: 5,\r\n        borderBottomRightRadius: 5,\r\n    }),\r\n    action: () => ({\r\n        //border: `0px 1px 1px 0px solid ${theme.palette.action.disabled}`,\r\n\r\n        //borderRadius: '0px 5px 15px 0px',\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n    }),\r\n    editorx: ({ multiline, rowMax }) => ({\r\n        height: multiline && rowMax === 1 ? 'auto' : `calc(22px * ${rowMax} + 34px)`,\r\n    }),\r\n    '@global': {\r\n        '.ProseMirror': ({ multiline, rowMax }) => ({\r\n            height: '100%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n            width: '100%',\r\n            fontSize: theme.typography.body1.fontSize,\r\n            fontFamily: theme.typography.fontFamily,\r\n            fontStyle: 'normal',\r\n            paddingTop: '1rem',\r\n            paddingBottom: '1rem',\r\n            paddingLeft: 10,\r\n            paddingRight: 10,\r\n        }),\r\n        '.ProseMirror p': {\r\n            marginBlockStart: 0,\r\n            marginBlockEnd: 0,\r\n        },\r\n        '.ProseMirror-focused': {\r\n            border: '0px solid red !important',\r\n        },\r\n        '.ProseMirror:focus': {\r\n            outline: 'none',\r\n        },\r\n        '.ProseMirror p.is-editor-empty:first-child::before': {\r\n            content: 'attr(data-empty-text)',\r\n            float: 'left',\r\n            color: theme.palette.type === 'dark' ? theme.palette.grey[400] : theme.palette.grey[600],\r\n            pointerEvents: 'none',\r\n            height: 0,\r\n        },\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n\r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    },\r\n}));\r\n\r\nexport const SharedTextFieldTipTapEditor = forwardRef(({name, multiline, rowMax = 1, maxLength, onChange, placeholder = '', initialvalue = '', type = 'text', max, min, deleteOnRemove = false}, ref) => {\r\n    const [focused, setFocused] = useState(false);\r\n    const classes = useStyles({\r\n        multiline,\r\n        rowMax,\r\n        focused,\r\n        type,\r\n    });\r\n    const [synced, setSynced] = useState(false);\r\n    const { doc, provider, user } = useSharedDocContext();\r\n    const [editor, setEditor] = useState(null);\r\n\r\n    const getText = useCallback(\r\n        () => {\r\n            return htmlToText(editor?.getHTML().toString()).trim().toString();\r\n        },\r\n        [editor],\r\n    );\r\n\r\n    const setText = useCallback(\r\n        (value) => {\r\n            editor?.commands.first(({ commands }) => [\r\n                () => commands.setContent(value.toString()),\r\n            ]);\r\n        },\r\n        [editor],\r\n    );\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearText: () => {\r\n                if (!doc || !editor) return;\r\n                setText('');\r\n            }\r\n        }),\r\n    );\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (!doc || !editor || !deleteOnRemove) return;\r\n            setText('');\r\n        }\r\n    }, [doc, editor, setText, deleteOnRemove]);\r\n\r\n    if(!editor){\r\n        setEditor(new Editor({\r\n            editorProps: type === 'number' ? {\r\n                handleTextInput: (view, from, to, text) => {\r\n                    if (isNaN(text) && text !== '-') return true;\r\n                    if (text === '0' && view.dom.firstChild.textContent === '00') return true;\r\n                    if (\r\n                        (text === '-' && view.dom.firstChild.textContent.match(/-/g).length > 1) || \r\n                        (text === '-' && min !== null && min >= 0) ||\r\n                        (text === '-' && view.dom.firstChild.textContent.indexOf('-') !== 0) \r\n                    ) return true;\r\n                    if (max !== null && parseInt(view.dom.firstChild.textContent) > max) return true;\r\n                    if (min !== null && parseInt(view.dom.firstChild.textContent) < min) return true;\r\n                    return false;\r\n                },\r\n                handlePaste: (view, event, slice) => {\r\n                    if (slice.content.childCount !== 1) return true;\r\n                    if (isNaN(slice.content.firstChild.textContent)) return true;\r\n                    const prevValue = view.dom.firstChild.textContent;\r\n                    const newValue = prevValue + slice.content.firstChild.textContent;\r\n                    if (\r\n                        (newValue.includes('-') && newValue.match(/-/g)?.length > 1) ||\r\n                        (newValue.includes('-') && newValue.indexOf('-') !== 0)\r\n                    ) return true;                    \r\n                    if (max !== null && parseInt(newValue) > max) return true;\r\n                    if (min !== null && parseInt(newValue) < min) return true;\r\n                    return false;\r\n                },\r\n            } : {},\r\n            extensions: [\r\n                Document.extend({\r\n                    content: multiline ? 'block+' : 'block',\r\n                }),\r\n                Paragraph,\r\n                Text,\r\n                Placeholder.configure({\r\n                    placeholder: placeholder.charAt(0).toUpperCase() + placeholder.slice(1),\r\n                }),\r\n                CollaborationCursor.configure({\r\n                    provider: provider,\r\n                    user,\r\n                }),\r\n                Collaboration.configure({\r\n                    document: doc,\r\n                    field: name,\r\n                }),\r\n                CharacterCount.configure({\r\n                    limit: maxLength,\r\n                }),\r\n            ],\r\n            onUpdate: (event) => {\r\n                const text = htmlToText(event.editor.getHTML().toString());\r\n                let value = (type === 'number' && !isNaN(text)) ? parseInt(text) : text;\r\n                if(onChange) onChange({\r\n                    target : {\r\n                        name,\r\n                        type,\r\n                        value: (type === 'number' && isNaN(value)) ? 0 : value,\r\n                    }\r\n                });\r\n            },\r\n            onFocus: ({editor, event}) => {\r\n                setFocused(true);\r\n            },\r\n            onBlur: ({editor, event}) => {\r\n                setFocused(false);\r\n            },\r\n        }));\r\n    }\r\n    useEffect(() => {\r\n        if (provider.synced) {\r\n            if(!synced){\r\n                if (getText() === '') {\r\n                    setText(initialvalue);\r\n                    setSynced(true);\r\n                }\r\n            }\r\n        } else {\r\n            provider.once('synced', () => {\r\n                if(!synced){\r\n                    if (getText() === '') {\r\n                        setText(initialvalue);\r\n                        setSynced(true);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, [provider.synced, getText, initialvalue, provider, setText, synced]);\r\n\r\n    if(!editor){\r\n        return (<div>Conectando...</div>);\r\n    }\r\n\r\n    const handleIncrement = () => {\r\n        let val = getText();\r\n        if (!editor || type !== 'number') return;\r\n        if (!val.length || val === '-') return setText(min ?? 0);\r\n        val = parseInt(val);\r\n        if (max !== null && (val + 1 > max)) return;\r\n        if(onChange) onChange({\r\n            target : {\r\n                name,\r\n                type,\r\n                value: (type === 'number' && isNaN(val)) ? 0 : val + 1,\r\n            }\r\n        });\r\n        return setText(val + 1);\r\n    };\r\n\r\n    const handleDecrement = () => {\r\n        let val = getText();\r\n        if (!editor || type !== 'number') return;\r\n        if (!val.length || val === '-') return setText(min ?? 0);\r\n        val = parseInt(val);\r\n        if (min !== null && (val - 1 < min)) return;\r\n        if(onChange) onChange({\r\n            target : {\r\n                name,\r\n                type,\r\n                value: (type === 'number' && isNaN(val)) ? 0 : val - 1,\r\n            }\r\n        });\r\n        return setText(val - 1);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.inputContainer} onClick={() => {\r\n                if (!focused) editor.chain().focus('end').run()\r\n            }}>\r\n                <EditorContent editor={editor} className={`${classes.editorx}`} />\r\n\r\n            </div>\r\n            {\r\n                type === 'number' && (\r\n                    <div className={classes.actions}>\r\n                        <Box className={classes.action} component={ButtonBase} onClick={handleIncrement}>\r\n                            <ArrowDropUp />\r\n                        </Box>\r\n                        <Divider />\r\n                        <Box className={classes.action} component={ButtonBase} onClick={handleDecrement}>\r\n                            <ArrowDropDown />\r\n                        </Box>\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n})\r\n","import React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\r\nimport { Grid, IconButton, makeStyles, Typography, Tooltip, Paper, MenuItem, FormControl, Select } from '@material-ui/core';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    taskSpacing: {\r\n        marginLeft: theme.spacing(2),\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    trashIcon: {\r\n        display: 'flex',\r\n    },\r\n    tasksSpacing: {\r\n        marginTop: theme.spacing(1),\r\n        background: theme.palette.background.workSpace\r\n    },\r\n    taskSpacingDescription: {\r\n        marginLeft: theme.spacing(2),\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    taskSpacingDescriptionBD: {\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    colorLearningType: {\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n    timeField: {\r\n        marginRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n}));\r\n\r\nexport const Task = forwardRef(({ learningActivityIndex, index, task }, ref) => {\r\n    const classes = useStyles();\r\n    const { socket } = useSocketState();\r\n    const isMounted = useRef(true);\r\n    const hoursRef = useRef();\r\n    const minutesRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        description: task.description,\r\n        learningType: task.learningType && task.learningType.trim() !== '' ? task.learningType : 'Seleccionar',\r\n        modality: task.modality && task.modality.trim() !== '' ? task.modality :'Seleccionar',\r\n        format: task.format && task.format.trim() !== '' ? task.format :'Seleccionar',\r\n        timeHours: task.duration.hours ?? 0,\r\n        timeMinutes: task.duration.minutes ?? 0,\r\n    });\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearTexts: () => {\r\n                hoursRef?.current.clearText();\r\n                minutesRef?.current.clearText();\r\n                descriptionRef?.current.clearText();\r\n            }\r\n        }),\r\n    );\r\n\r\n    useEffect(()=>{\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.description !== task.description){\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    description: task.description,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.description, task.description, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.learningType !== task.learningType){\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    learningType: task.learningType && task.learningType.trim() !== '' ? task.learningType : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.learningType, task.learningType, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.modality !== task.modality){\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    modality: task.modality && task.modality.trim() !== '' ? task.modality : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.modality, task.modality, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.format !== task.format){\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    format: task.format && task.format.trim() !== '' ? task.format : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.format, task.format, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.timeHours !== task.duration.hours){\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    timeHours: task.duration.hours ?? 0,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.timeHours, task.duration.hours, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.timeMinutes !== task.duration.minutes){\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    timeMinutes: task.duration.minutes ?? 0,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.timeMinutes, task.duration.minutes, setValues]);\r\n    \r\n    const { description, learningType, modality, format, timeHours, timeMinutes,  } = form;\r\n    \r\n    const handleEditTaskField = ({ target }) => {\r\n        let { name: field, value } = target;\r\n        let subfield = null;\r\n        if(field.includes('description')) field = 'description';\r\n        else if (field.includes('timeHours')){\r\n            field = 'duration';\r\n            subfield = 'hours';\r\n            value = isNaN(value) ? 0 : value;\r\n        }else if (field.includes('timeMinutes')){\r\n            field = 'duration';\r\n            subfield = 'minutes';\r\n            value = isNaN(value) ? 0 : value;\r\n        }\r\n        handleInputChange({ target });\r\n        socket.emit('edit-task-field', { designId: design._id, learningActivityIndex, index, field, value, subfield });\r\n    };\r\n    \r\n    const handleDeleteTask = (index) => {\r\n        if (description === \"\" && learningType === 'Seleccionar' && modality === 'Seleccionar' && format === 'Seleccionar' && timeHours === 0 && timeMinutes === 0 ){\r\n            hoursRef?.current.clearText();\r\n            minutesRef?.current.clearText();\r\n            descriptionRef?.current.clearText();\r\n            socket.emit('delete-task', { designId: design._id, learningActivityIndex, index });\r\n            enqueueSnackbar('Su tarea se ha eliminado',  {variant: 'success', autoHideDuration: 2000});\r\n        } else {\r\n            dispatch({\r\n                type: types.ui.setConfirmData,\r\n                payload: {\r\n                    type: 'tarea',\r\n                    args: { designId: design._id, learningActivityIndex, index },\r\n                    actionMutation: null,\r\n                }\r\n            })\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'Confirmation',\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleChangeDropdown = (e) => {\r\n        handleInputChange(e);\r\n        socket.emit('edit-task-field', { designId: design._id, learningActivityIndex, index, field: e.target.name, value: e.target.value, subfield: null });\r\n    };\r\n\r\n    const listTasksArray = () => {\r\n        return (\r\n            <Grid key={index}>\r\n                <Paper square className={classes.tasksSpacing}>\r\n                    <Grid container >\r\n                        <Grid item xs={1}>\r\n                            {(() => {\r\n                                if (task.learningType === 'Investigacin') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#57A8E7' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Adquisicin') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#E95D5D' }}></div>\r\n                                    )\r\n                                }else if (task.learningType === 'Produccin') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#C8951F' }}></div>\r\n                                    )\r\n                                }else if (task.learningType === 'Discusin') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#087A4C' }}></div>\r\n                                    )\r\n                                }else if (task.learningType === 'Colaboracin') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#DFDF3F' }}></div>\r\n                                    )\r\n                                }else if (task.learningType === 'Prctica') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#A75BCD' }}></div>\r\n                                    )\r\n                                }\r\n                            })()}\r\n                        </Grid>\r\n                        <Grid item xs={11}>\r\n                            <Grid container className={classes.taskSpacing}>\r\n                                <Grid item xs={12} sm={5}>\r\n                                    <FormControl variant='outlined' size='small' style={{width: '90%'}}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" > Aprendizaje </Typography>\r\n                                        <Select\r\n                                            name='learningType'\r\n                                            value={learningType}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Investigacin'}> Investigacin </MenuItem>\r\n                                            <MenuItem value={'Adquisicin'}> Adquisicin </MenuItem>\r\n                                            <MenuItem value={'Produccin'}> Produccin </MenuItem>\r\n                                            <MenuItem value={'Discusin'}> Discusin </MenuItem>\r\n                                            <MenuItem value={'Colaboracin'}> Colaboracin </MenuItem>\r\n                                            <MenuItem value={'Prctica'}> Prctica </MenuItem>\r\n                                            \r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </Grid>\r\n                                <Grid item xs={12} sm={6} className={classes.grid} style={{justifyContent: 'space-between'}}>\r\n                                    <FormControl variant='outlined' size='small' style={{width: '90%'}}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" > Modalidad </Typography>\r\n                                        <Select\r\n                                            name='modality'\r\n                                            value={modality}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Presencial-Asncrono'}> Presencial-Asncrono</MenuItem>\r\n                                            <MenuItem value={'Presencial-Sncrono'}> Presencial-Sncrono</MenuItem>\r\n                                            <MenuItem value={'Online-Asncrono'}> Online-Asncrono</MenuItem>\r\n                                            <MenuItem value={'Online-Sncrono'}> Online-Sncrono</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    <Tooltip title=\"Delete\">\r\n                                        <IconButton onClick={() => handleDeleteTask(index)}>\r\n                                            <DeleteForeverIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </Tooltip>\r\n                                </Grid>\r\n                            </Grid>\r\n                            <Grid container className={classes.taskSpacing}>\r\n                                <Grid item xs={12} sm={6} className={classes.grid}>\r\n                                    <div style={{ width: '100%' }}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\"> Tiempo de trabajo </Typography>\r\n                                        <div className={classes.timeField}>\r\n                                            <SharedTextFieldTipTapEditor \r\n                                                ref={hoursRef} \r\n                                                name={`timeHours-task-${index}-learning-activity-${learningActivityIndex}`} // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                                placeholder='Horas'\r\n                                                initialvalue={timeHours}\r\n                                                onChange={handleEditTaskField}\r\n                                                type='number'\r\n                                                min={0}\r\n                                                //deleteOnRemove\r\n                                            />\r\n                                            <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                            <SharedTextFieldTipTapEditor \r\n                                                ref={minutesRef}\r\n                                                name={`timeMinutes-task-${index}-learning-activity-${learningActivityIndex}`} // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                                placeholder='Minutos'\r\n                                                initialvalue={timeMinutes}\r\n                                                onChange={handleEditTaskField}\r\n                                                type='number'\r\n                                                min={0}\r\n                                                max={59}\r\n                                                //deleteOnRemove\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </Grid>\r\n                                <Grid item xs={12} sm={6} className={classes.grid}>\r\n                                        <FormControl variant='outlined' size='small' style={{width: '90%', marginRight: 5}}>\r\n                                            <Typography variant=\"body2\" color=\"textSecondary\" style={{marginBottom: 4, marginRight: 5}}> Formato </Typography>\r\n                                            <Select\r\n                                                name='format'\r\n                                                value={format}\r\n                                                onChange={handleChangeDropdown}\r\n                                            >\r\n                                                <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                                <MenuItem value={'Grupal'}> Grupal</MenuItem>\r\n                                                <MenuItem value={'Individual'}> Individual</MenuItem>\r\n                                                <MenuItem value={'Toda la clase'}> Toda la clase</MenuItem>\r\n                                            </Select>    \r\n                                        </FormControl>\r\n                                </Grid>\r\n                            </Grid>\r\n                            <Grid container className={classes.taskSpacingDescription}>\r\n                                <Grid item sm={11}>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" > Descripcin </Typography>\r\n                                    <Grid className={classes.taskSpacingDescriptionBD}>\r\n                                        <SharedTextFieldTipTapEditor \r\n                                            ref={descriptionRef}\r\n                                            name={`description-task-${index}-learning-activity-${learningActivityIndex}`} // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                            placeholder='Descripcin'\r\n                                            initialvalue={description}\r\n                                            onChange={handleEditTaskField}\r\n                                            multiline\r\n                                            //deleteOnRemove\r\n                                        />\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Grid>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                listTasksArray()\r\n            }\r\n        </>\r\n    )\r\n})\r\n","import React from 'react';\r\nimport { makeStyles, Tooltip, Typography } from '@material-ui/core';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        //borderRadius: '6px',\r\n        height: '100%',\r\n    },\r\n    title:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    colorBox: {\r\n        width: 10,\r\n        height: 10,\r\n        marginRight: 5,\r\n        border: `1px solid #dddddd`,\r\n    },\r\n    colorBoxRightPanel: {\r\n        width: 13,\r\n        height: 13,\r\n        marginRight: 5,\r\n    },\r\n    spacingGraphic:{\r\n        marginTop: theme.spacing(1),\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    legend:{\r\n        marginTop: theme.spacing(0.5),\r\n        marginLeft: theme.spacing(0.5),\r\n        marginRight: theme.spacing(0.5),\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n}));\r\n\r\n/*borderRadius: index === 0 \r\n    ? '5px 0px 0px 5px'\r\n    : index === items.length - 1  && item.value !== 0\r\n        ? '0px 5px 5px 0px'\r\n        : 0,\r\n*/\r\n\r\nexport const StackedBar = ({ height = 25, items, type, legends }) => {\r\n    const classes = useStyles();\r\n    const { userConfig } = useUserConfigState();\r\n    let colors = [];\r\n    let valueTotal = 0;\r\n    \r\n    items.map ((item) =>( valueTotal = item.value + valueTotal));\r\n    if( type === 'Activity' ){ (userConfig.darkTheme) ? colors = ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'] : colors = ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'];}\r\n    else if( type === 'Format'){ (userConfig.darkTheme) ? colors = ['rgba(61, 156, 65, 0.8)', 'rgba(224, 243, 225, 0.8)', 'rgba(102, 242, 108, 0.75)'] : colors = ['rgba(61, 156, 65, 0.8)', 'rgba(224, 243, 225, 0.8)', 'rgba(102, 242, 108, 0.75)'];}\r\n    else if( type === 'Modality' ){ (userConfig.darkTheme) ? colors = ['#A6CAF6', '#6996CD', '#5FA2EF', '#135BB3'] : colors = ['#A6CAF6', '#6996CD', '#5FA2EF', '#135BB3']};\r\n    \r\n    return (\r\n        <>\r\n            <div className={classes.root} style={{height}}>\r\n                {   \r\n                    items.map( (item, index) => (\r\n                        <>\r\n                        <Tooltip \r\n                            key={`nombreGrafico${index}`} \r\n                            title={\r\n                                <div className={classes.title}>\r\n                                    <div className={classes.colorBox} style={{backgroundColor: colors[index]}}></div>\r\n                                    {`${item.title}: ${((item.value * 100)/valueTotal).toFixed(1)}%`}\r\n                                </div>\r\n                            } \r\n                            arrow\r\n                        >\r\n                            <div\r\n                                style={{\r\n                                    width: `${item.value * 100}%`, \r\n                                    height: '100%', \r\n                                    backgroundColor: colors[index]\r\n                                    }}\r\n                                >\r\n                            </div>\r\n                        </Tooltip>\r\n                        </>\r\n                    ))\r\n                }\r\n            </div>\r\n            {   \r\n                (legends) && \r\n                <div className={classes.spacingGraphic}>\r\n                    { items.map ((item, index) =>( \r\n                        <div className={classes.legend} key={index} >\r\n                            <div className={classes.colorBoxRightPanel} style={{backgroundColor: colors[index]}}></div>\r\n                            <Typography  variant=\"caption\" > {item.title} </Typography>\r\n                        </div>)\r\n                    )}\r\n                </div>\r\n            }\r\n        </>\r\n    );\r\n};\r\n","export let itemsLearningType = [{\r\n    title: 'Investigacin',\r\n    value: 0,\r\n},{\r\n    title: 'Adquisicin',\r\n    value: 0,\r\n},{\r\n    title: 'Produccin',\r\n    value: 0,\r\n},{\r\n    title: 'Discusin',\r\n    value: 0,\r\n},{\r\n    title: 'Colaboracin',\r\n    value: 0,\r\n},{\r\n    title: 'Prctica',\r\n    value: 0,\r\n}];\r\n\r\nexport let itemsLearningTypePie = [{\r\n    title: 'Investigacin',\r\n    value: 0,\r\n},{\r\n    title: 'Adquisicin',\r\n    value: 0,\r\n},{\r\n    title: 'Produccin',\r\n    value: 0,\r\n},{\r\n    title: 'Discusin',\r\n    value: 0,\r\n},{\r\n    title: 'Colaboracin',\r\n    value: 0,\r\n},{\r\n    title: 'Prctica',\r\n    value: 0,\r\n}];\r\n\r\nexport let itemsFormat = [{\r\n    title: 'Grupal',\r\n    value: 0\r\n},{\r\n    title: 'Individual',\r\n    value:0\r\n},{\r\n    title: 'Toda la clase',\r\n    value:0\r\n}];\r\n\r\nexport let itemsModality = [{\r\n    title: 'Presencial-Asncrono',\r\n    value: 0\r\n},{\r\n    title: 'Presencial-Sncrono',\r\n    value: 0\r\n},{\r\n    title: 'Online-Asncrono',\r\n    value: 0\r\n},{\r\n    title: 'Online-Sncrono',\r\n    value: 0\r\n}];","import React, { useEffect, useRef } from 'react';\r\nimport { Button, Checkbox, Divider, FormControlLabel, Grid, IconButton, makeStyles, Paper, Tooltip, Typography } from '@material-ui/core'\r\nimport { Task } from 'pages/DesignPage/Workspace/Task';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { itemsLearningType } from 'assets/resource/items'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    unitSpacing: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    titleUnitSpacing: {\r\n        display: 'flex',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    graphicUnitSpacing: {\r\n        width: '100%',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    trashIcon: {\r\n        marginLeft: \"auto\",\r\n    },\r\n    spacingDescriptionlearningActivity: {\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    spacingDescription: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    spacingLinkedResults: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    buttonPos: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: \"auto\",\r\n    },\r\n    gridTask: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    learningResultList: {\r\n        display: 'flex',\r\n        flexWrap: 'nowrap',\r\n        flexDirection: 'column',\r\n        paddingLeft: 15,\r\n        maxHeight: 200,\r\n        overflow: 'auto',\r\n        overflowX: true,\r\n    }\r\n}));\r\n\r\nexport const LearningActivity = ({ index, learningActivity }) => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { socket } = useSocketState();\r\n    const { dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const titleRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const taskRefs = useRef([]);\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        title: learningActivity.title,\r\n        description: learningActivity.description,\r\n    });\r\n\r\n    useEffect(() => {\r\n        setValues({\r\n            title: learningActivity.title,\r\n            description: learningActivity.description,\r\n        });\r\n    }, [design, setValues, learningActivity]);\r\n\r\n    const { title, description } = form;\r\n    \r\n    const handleDeleteUnit = () => {\r\n        if(title === \"\" && description === \"\" && learningActivity.learningResults.length === 0 && (learningActivity.tasks === undefined || learningActivity.tasks.length === 0)){\r\n            taskRefs?.current.forEach(task => task?.clearTexts());\r\n            titleRef?.current.clearText();\r\n            descriptionRef?.current.clearText();\r\n            socket.emit('delete-learningActivity', { designId: design._id, index });\r\n            enqueueSnackbar('Su actividad se ha eliminado',  {variant: 'success', autoHideDuration: 2000});\r\n        }else {\r\n            dispatch({\r\n                type: types.ui.setConfirmData,\r\n                payload: {\r\n                    type: 'actividad',\r\n                    args: { designId: design._id, index },\r\n                    actionMutation: null,\r\n                }\r\n            });\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'Confirmation',\r\n            });\r\n        }\r\n    };\r\n    \r\n    const resetItems = () =>{\r\n        itemsLearningType.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n    };\r\n\r\n    const handleAddTask = () => {\r\n        socket.emit('new-task', { designId: design._id, index });\r\n    };\r\n\r\n    const handleToggleLearningResult = (e, isSelected, result) => {\r\n        if(isSelected){\r\n            let indexLearningResults = 0;\r\n            learningActivity.learningResults.forEach((r, _indexLearningResults) => {\r\n                if (r.verb === result.verb && r.description === result.description) indexLearningResults = _indexLearningResults;\r\n            });\r\n            socket.emit('delete-learning-result-from-learningActivity', {\r\n                designId: design._id,\r\n                index,\r\n                indexLearningResults\r\n            });\r\n        }else{\r\n            socket.emit('add-learning-result-to-learningActivity', {\r\n                designId: design._id,\r\n                index,\r\n                result\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleEditLearningActivityField = ({ target }) => {\r\n        let field = target.name;\r\n        if(target.name.includes('title')) field = 'title';\r\n        else if (target.name.includes('description')) field = 'description';\r\n        socket.emit('edit-unit-field', { designId: design._id, index, field, value: target.value });\r\n        handleInputChange({ target: {...target, name: field} });\r\n    };\r\n\r\n    const listlearningActivityArray = () => {\r\n        return (\r\n            <Grid key={index}>\r\n                <Paper className={classes.unitSpacing}>\r\n                    <Grid container>\r\n                        <Grid item xs={12} sm={5} className={classes.titleUnitSpacing}>\r\n                            <SharedTextFieldTipTapEditor \r\n                                ref={titleRef}\r\n                                name={`title-learning-activity-${index}`} // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                placeholder='Ttulo'\r\n                                initialvalue={title}\r\n                                onChange={handleEditLearningActivityField}\r\n                            />\r\n                        </Grid>\r\n                        {resetItems()}\r\n                        <Grid item xs={12} sm={7} className={classes.graphicUnitSpacing}>\r\n                            {   \r\n                                design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.forEach((task)=>\r\n                                {   \r\n                                    itemsLearningType.forEach((item) =>{ \r\n                                        if( item.title === task.learningType ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                } \r\n                                )\r\n                            }\r\n                            <StackedBar items = {itemsLearningType} type = {'Activity'}/>\r\n                            <Tooltip title=\"Delete\">\r\n                                <IconButton onClick={handleDeleteUnit}>\r\n                                    <DeleteForeverIcon fontSize=\"small\" />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Divider />\r\n                    <Grid container spacing={2} >\r\n                        <Grid item xs={12} sm={8}>\r\n                            <Grid className={classes.gridTask}>\r\n                                { \r\n                                    design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.map((task, i)=> <Task ref={(ref) => taskRefs.current.push(ref)} key={`task-${i}-learningActivity-${index}`} index={i} task={task} learningActivityIndex={index}/> ) \r\n                                }\r\n                            </Grid>\r\n                            <Grid container>\r\n                                <Grid item />\r\n                                <Grid item className={classes.buttonPos}>\r\n                                    <Button size=\"small\" variant=\"outlined\" onClick={handleAddTask}> Agregar Tarea </Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={4} >\r\n                            <Typography variant=\"body2\" className={classes.spacingDescriptionlearningActivity} color=\"textSecondary\"> Descripcin Unidad de aprendizaje </Typography>\r\n                            <Grid className={classes.spacingDescription}>\r\n                                <SharedTextFieldTipTapEditor \r\n                                    ref={descriptionRef}\r\n                                    name={`description-learning-activity-${index}`} // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                    placeholder='Ttulo'\r\n                                    initialvalue={description}\r\n                                    onChange={(e)=>handleEditLearningActivityField}\r\n                                    rowMax={3}\r\n                                    multiline\r\n                                    //deleteOnRemove\r\n                                />\r\n                            </Grid>\r\n                            <Typography variant=\"body2\" className={classes.spacingLinkedResults} color=\"textSecondary\"> Resultados Vinculados </Typography>\r\n                            <div className={classes.learningResultList}>\r\n                                {\r\n                                    design.metadata.results.map(result => (\r\n                                        <FormControlLabel\r\n                                            style={{width: '50%'}}\r\n                                            key={`learning-result-${result.verb}`}\r\n                                            control={\r\n                                                <Checkbox \r\n                                                    checked={!!learningActivity.learningResults.find(lr=> lr.verb === result.verb)} \r\n                                                    onChange={(e)=>handleToggleLearningResult(e, \r\n                                                        !!learningActivity.learningResults.find(lr=> lr.verb === result.verb),\r\n                                                        result\r\n                                                    )} \r\n                                                />\r\n                                            }\r\n                                            label={result.verb}\r\n                                        />\r\n                                    ))\r\n                                }\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                listlearningActivityArray()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport PieChart, {\r\n    Legend,\r\n    Series,\r\n    Tooltip,\r\n  } from 'devextreme-react/pie-chart';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport 'devextreme/dist/css/dx.common.css';\r\nimport 'devextreme/dist/css/dx.light.css';\r\n\r\nexport const PieGraphic = ({items}) => {\r\n    const { userConfig } = useUserConfigState();\r\n    const customizeTooltip = (arg) =>{\r\n        return {\r\n          text: `${arg.argumentText} - ${(arg.percent * 100).toFixed(1)}%`\r\n        };\r\n    };\r\n    \r\n    return (\r\n        <>\r\n            <PieChart\r\n                id='pie'\r\n                palette = {(userConfig.darkTheme) ? ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'] : ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD']}\r\n                dataSource={items}\r\n                title = 'Anlisis'\r\n                theme = {(userConfig.darkTheme) ? 'generic.contrast' : 'generic.light'}\r\n            >   \r\n                <Series argumentField='title' valueField = 'value'/>\r\n                <Legend\r\n                    verticalAlignment='bottom'\r\n                    horizontalAlignment='center'\r\n                    itemTextPosition='right'\r\n                    rowCount={2}\r\n                />\r\n                <Tooltip enabled={true} customizeTooltip={customizeTooltip}>\r\n                </Tooltip>\r\n            </PieChart>\r\n        </>\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport { Avatar, Button, Dialog, DialogActions, DialogContent, DialogTitle, Divider, FormControl, Grid, IconButton, makeStyles, MenuItem, Select, TextField, Typography } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport types from 'types';\r\nimport { Alert, Autocomplete } from '@material-ui/lab';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useQuery } from 'react-query';\r\nimport { getUser } from 'services/UserService';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    titleSectionShare: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        margin: 'auto',\r\n        width: 'fit-content',\r\n    },\r\n    divSectionShare: {\r\n        marginBottom: theme.spacing(4),\r\n    },\r\n}));\r\n\r\nexport const ShareModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const [user] = useState('');\r\n    const [inputUser, setInputUser] = useState('');\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { socket } = useSocketState();\r\n    const [newPrivileges, setNewPrivileges] = useState([...design.privileges]);\r\n    const { data, error, isError, isLoading } = useQuery(['user-profile', design.owner], async () => {\r\n        return await getUser(design.owner);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const handleAddContactInArray = (v) => {\r\n        if (!v) return;\r\n        const user = data.contacts.find(u => u.name === v);\r\n        if (!user) return;\r\n        const isInDesignContacts = design.privileges.map(privilege => privilege.user._id === user._id).reduce((a, b) => a || b);\r\n        if (!isInDesignContacts) {\r\n            setNewPrivileges([...newPrivileges, { user, type: 1 }]);\r\n        } else {\r\n            enqueueSnackbar('El usuario ya se encuentra agregado', { variant: 'error', anchorOrigin: { vertical: 'bottom', horizontal: 'center' }, autoHideDuration: 2000 });\r\n        };\r\n        setInputUser('');\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setNewPrivileges([...design.privileges]);\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        });\r\n    };\r\n\r\n    const handleAddContactInDesign = () => {\r\n        socket.emit('change-design-privileges', { designId: design._id, privileges: [...newPrivileges] });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        });\r\n        enqueueSnackbar('Se ha compartido su diseo correctamente',  {variant: 'success', autoHideDuration: 2000});\r\n    };\r\n\r\n    const handleChange = (e, type, index) => {\r\n        const v = e.target.value;\r\n        if (v === type) return;\r\n        if (v === 'Quitar') {\r\n            if (index === newPrivileges.length - 1) {\r\n                setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                ])\r\n            } else {\r\n                setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    ...newPrivileges.slice(index + 1, newPrivileges.length)\r\n                ])\r\n            }\r\n        }else {\r\n            const p = { ...newPrivileges[index] };\r\n            p.type = v;\r\n            if (index === newPrivileges.length - 1) {\r\n                setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    p,\r\n                ])\r\n            } else {\r\n                setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    p,\r\n                    ...newPrivileges.slice(index + 1, newPrivileges.length)\r\n                ])\r\n            }\r\n        };\r\n    };\r\n\r\n    if (error) {\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    {error}\r\n                </Alert>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (!design || !data) {\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const content = () => {\r\n        if (isLoading) {\r\n            return <Typography>Cargando...</Typography>\r\n        } else if (isError) {\r\n            return (\r\n                <div className={classes.error}>\r\n                    <Alert severity='error'>\r\n                        {error}\r\n                    </Alert>\r\n                </div>)\r\n        } else {\r\n            return (\r\n                <>\r\n                    {/*\r\n                    <div className = {classes.divSectionShare}>\r\n                        <div className = {classes.titleSectionShare}>\r\n                            <Typography color='textSecondary'> Compartir mediante enlace </Typography>\r\n                        </div>\r\n                        <div>\r\n                            <Typography> Cualquier usuario que tenga este enlace puede ver este diseo </Typography>\r\n                            <div color={'green'}>\r\n                                https://www.soportetecnologico.cl/lectura/32132dsadsad\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    */}\r\n                    <div>\r\n                        <div className={classes.titleSectionShare}>\r\n                            <Typography color='textSecondary'> Compartir a contactos </Typography>\r\n                        </div>\r\n                        <div>\r\n                            <Autocomplete\r\n                                value={user}\r\n                                blurOnSelect\r\n                                onChange={(e, v) => {\r\n                                    handleAddContactInArray(v)\r\n                                }}\r\n                                inputValue={inputUser}\r\n                                onInputChange={(event, newInputUser) => {\r\n                                    setInputUser(newInputUser);\r\n                                }}\r\n                                options={data.contacts.map(contact => {\r\n                                    return contact.name\r\n                                })}\r\n                                getOptionSelected={(option, value) => option.id === value.id}\r\n                                renderInput={(params) =>\r\n                                    <TextField\r\n                                        {...params}\r\n                                        label=\"Buscar Contacto\"\r\n                                        margin=\"normal\"\r\n                                        variant=\"outlined\"\r\n                                        InputProps={{ ...params.InputProps }}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <Divider style={{ marginBottom: 10 }} />\r\n                            {newPrivileges.map((privilege, i) => {\r\n                                return (\r\n                                    <Grid container style={{ marginBottom: 10 }} key={`privilege-${i}`}>\r\n                                        <Grid style={{ justifyContent: 'space-between' }}>\r\n                                            <Avatar style={{ marginRight: 7 }} />\r\n                                        </Grid>\r\n                                        <Grid style={{ justifyContent: 'space-between' }}>\r\n                                            <Typography>{privilege.user.name + ' ' + privilege.user.lastname}</Typography>\r\n                                            <Typography color={'textSecondary'}>{privilege.user.email}</Typography>\r\n                                        </Grid>\r\n                                        <Grid style={{ justifyContent: 'space-between', marginLeft: \"auto\" }}>\r\n                                            {(privilege.user._id === design.owner) ?\r\n                                                <Typography>Propietario</Typography>\r\n                                                :\r\n                                                <FormControl variant='outlined' size='small'>\r\n                                                    <Select\r\n                                                        key={`privileges-action-${i}`}\r\n                                                        name='type'\r\n                                                        value={privilege.type}\r\n                                                        onChange={(e) => { handleChange(e, privilege.type, i) }}\r\n                                                    >\r\n                                                        <MenuItem value={0}> Editor </MenuItem>\r\n                                                        <MenuItem value={1}> Lector</MenuItem>\r\n                                                        <MenuItem value={'Quitar'}> Quitar</MenuItem>\r\n                                                    </Select>\r\n                                                </FormControl>\r\n                                            }\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog onClose={handleClose} open={uiState.isShareModalOpen} maxWidth={'sm'} fullWidth>\r\n                <DialogTitle >\r\n                    Compartir Diseo\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers>\r\n                    {content()}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleAddContactInDesign}>\r\n                        Listo\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Button, ButtonGroup, Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { LearningActivity } from 'pages/DesignPage/Workspace/LearningActivity';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { PieGraphic } from 'components/PieGraphic';\r\nimport { itemsLearningType, itemsFormat, itemsModality, itemsLearningTypePie } from 'assets/resource/items'\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ShareModal } from './ShareModal';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        background: theme.palette.background.workSpace,\r\n        height: 'calc(100vh - 177px)',\r\n        overflow: 'auto'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    buttonGroupWorkSpace:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    textLefPanel:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    spaceData:{\r\n        marginBottom: theme.spacing(1),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    LeftPanelMetadata:{\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    textLefPanelMetadata:{\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    graphicsSpacing:{\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    betweenGraphics:{\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    workSpaceUnits:{\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    },\r\n      \r\n}));\r\n\r\nexport const DesignWorkspace = () => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    const { socket } = useSocketState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    \r\n    const { dispatch } = useUiState();\r\n    let showGraphicLearningType = false;\r\n    let showGraphicFormat = false;\r\n    let showGraphicModality = false;\r\n\r\n    const handleSaveDesign = (e) => {\r\n        socket.emit('save-design', { designId: design._id });\r\n        enqueueSnackbar('Su diseo se ha guardado correctamente',  {variant: 'success', autoHideDuration: 2000});\r\n    };\r\n\r\n    const handleNewUA = () => {\r\n        socket.emit('new-learningActivity', { designId: design._id });    \r\n    };\r\n\r\n    const handleOpenModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        })\r\n        \r\n    };\r\n    \r\n    const resetItems = () =>{\r\n        itemsLearningType.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        itemsLearningTypePie.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        \r\n        itemsFormat.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        itemsModality.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n    };\r\n    \r\n    design.data.learningActivities.forEach((activities) => {\r\n        if (activities.tasks !== undefined) {\r\n            activities.tasks.forEach(task=>{\r\n                if (task.learningType !== '' && task.learningType !== 'Seleccionar' ) {\r\n                    showGraphicLearningType  = true;\r\n                }\r\n                if (task.format !== '' && task.format !== 'Seleccionar') {\r\n                    showGraphicFormat = true;\r\n                }\r\n                if (task.modality !== '' && task.modality !== 'Seleccionar') {\r\n                    showGraphicModality = true;\r\n                }\r\n            })\r\n        }\r\n    });\r\n    \r\n    return (\r\n        <>  \r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <Grid container alignItems='center' justify='center'>\r\n                        <Typography className={classes.textLefPanel}> INFORMACIN DISEO </Typography>\r\n                    </Grid>\r\n                    <Divider className={classes.spaceData}/>\r\n                    <Grid className={classes.LeftPanelMetadata}>\r\n                        <Grid>\r\n                            { metadata && metadata.name &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary'> Nombre </Typography>\r\n                                        <Typography variant='body2'>{ metadata.name }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.category &&(\r\n                                <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}>Tema</Typography>\r\n                                        <Typography variant='body2'> { metadata.category.name } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.workingTime &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}> Tiempo de trabajo </Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.workingTime.hours } : {metadata.workingTime.minutes}</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.workingTimeDesign &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}>Tiempo de trabajo Diseo</Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.workingTimeDesign }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.name &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}> Modo de entrega </Typography>\r\n                                        <Typography variant='body2' > { metadata.name } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                            { metadata && metadata.classSize &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}> Tamao de la clase </Typography>\r\n                                        <Typography variant='body2'> { metadata.classSize } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        <Grid>\r\n                            { metadata && metadata.priorKnowledge &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}> Conocimiento Previo </Typography>\r\n                                        <Typography variant='body2' > { metadata.priorKnowledge } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.description &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}> Descripcin </Typography>\r\n                                        <Typography variant='body2'> { metadata.description } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.objective &&(\r\n                                    <>\r\n                                        <Typography color='textSecondary' className={classes.textLefPanelMetadata}> Objetivos </Typography>\r\n                                        <Typography> { metadata.objective } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { /*metadata && metadata.results &&(\r\n                                    <>\r\n                                        <Typography color='textSecondary' className={classes.textLefPanelMetadata}> Resultados </Typography>\r\n                                        <Typography>{ metadata.results }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )*/\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <ButtonGroup size='small' aria-label='outlined primary button group' className={classes.buttonGroupWorkSpace}>\r\n                        <Button>Nuevo</Button>\r\n                        <Button onClick = {handleOpenModal}>Compartir</Button>\r\n                        <Button onClick = {handleSaveDesign}>Guardar</Button>\r\n                    </ButtonGroup>\r\n                    <Grid className={classes.workSpaceUnits}>\r\n                        <Button size='small' variant = 'outlined' onClick={handleNewUA}>Agregar Unidad de Aprendizaje</Button>\r\n                        <Grid >\r\n                            {\r\n                                design.data.learningActivities && design.data.learningActivities.map((learningActivity, index) => <LearningActivity key={`learningActivity-${index}`} index={index} learningActivity={learningActivity}/> )\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}>\r\n                    {resetItems()}\r\n                    <Grid className={classes.graphicsSpacing}>\r\n                        {   \r\n                            design.data.learningActivities && design.data.learningActivities.map((learningActivity) => \r\n                                learningActivity.tasks && learningActivity.tasks.forEach((task) => {\r\n                                    itemsLearningType.forEach((item) =>{\r\n                                        if( item.title === task.learningType){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsLearningTypePie.forEach((item) =>{\r\n                                        if( item.title === task.learningType){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsFormat.forEach((item) =>{ \r\n                                        if( item.title === task.format ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsModality.forEach((item) =>{ \r\n                                        if( item.title === task.modality ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                }))\r\n                        }\r\n                        { showGraphicLearningType && \r\n                            <div className={classes.betweenGraphics}>\r\n                                <PieGraphic items = { itemsLearningTypePie}></PieGraphic>\r\n                            </div>\r\n                        }\r\n                        {   showGraphicFormat &&\r\n                            <div className={classes.betweenGraphics}>\r\n                                <Typography>Formato</Typography>\r\n                                <StackedBar items = {itemsFormat} type={'Format'} legends={true}></StackedBar>\r\n                            </div>\r\n                        }\r\n                        {   showGraphicModality &&\r\n                            <div className={classes.betweenGraphics}>\r\n                                <Typography>Modalidad</Typography>\r\n                                <StackedBar items = {itemsModality} type={'Modality'} legends={true}></StackedBar>\r\n                            </div>\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            <ShareModal />\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","\r\nexport default class TimeFormatter {\r\n    static toHoursAndMinutes = (timeInMinutes = 0) => {\r\n        let hours = Math.floor(timeInMinutes / 60);\r\n        let minutes = Math.round((timeInMinutes / 60 - hours) * 60);\r\n        return [hours, minutes];\r\n    }\r\n\r\n    static toMinutes = (hours = 0, minutes = 0) => {\r\n        return (parseInt(hours) * 60) + parseInt(minutes);\r\n    };\r\n}","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getCategories = async () => {\r\n    const resp = await fetchWithToken('category');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React from 'react';\r\nimport { IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        padding: 20,\r\n        width: '49%',\r\n        marginBottom: 10,\r\n        borderRadius: 5,\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n    },\r\n    description: {\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        textAlign: 'justify',\r\n    },\r\n    actions: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 8,\r\n    }\r\n}));\r\n\r\nexport const LearningResult = ({ verb, description, index}) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { dispatch: uiDispatch } = useUiState();\r\n    const { designState, dispatch: designDispatch } = useDesignState();\r\n    const { design } = designState;\r\n\r\n    const handleEdit = () => {\r\n        const { bloomVerbs, bloomCategories } = designState;\r\n        const category = bloomCategories.find((category) => category._id === bloomVerbs.find((v) => v.name === verb).category)._id;\r\n        designDispatch({\r\n            type: types.design.setCurrentLearningResult,\r\n            payload: {\r\n                category,\r\n                verb,\r\n                description,\r\n                editing: true,\r\n                index,\r\n            }\r\n        });\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'LearningResult',\r\n        });\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        let index = 0;\r\n        design.metadata.results.forEach((result, _index) => {\r\n            if (result.verb === verb && result.description === description) index = _index;\r\n        });\r\n        socket.emit('delete-learning-result', { designId: design._id, index });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Typography color=\"textSecondary\" gutterBottom variant='caption'>Resultado</Typography>\r\n            <Typography variant='body2'>{verb}</Typography>\r\n            <Typography color=\"textSecondary\" gutterBottom variant='caption'>Descripcin</Typography>\r\n            <Typography className={classes.description} variant='body2'>{description}</Typography>\r\n            <div className={classes.actions}>\r\n                <IconButton className={classes.deleteIcon} onClick={handleEdit}>\r\n                    <Edit />\r\n                </IconButton>\r\n                <IconButton className={classes.deleteIcon} onClick={handleDelete}>\r\n                    <Delete />\r\n                </IconButton>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        height: 300,\r\n        clipPath: 'polygon(50% 0, 0 100%, 100% 100%)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    option: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        marginBottom: 10,\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        '&:hover': {\r\n            transition: 'box-shadow .3s',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)'\r\n        }\r\n    },\r\n    crear: {\r\n        paddingTop: 30,\r\n        height: '25%'\r\n    },\r\n    evaluar: {\r\n        height: '16.6%'\r\n    },\r\n    analizar: {\r\n        height: '16.6%'\r\n    },\r\n    aplicar: {\r\n        height: '16.6%'\r\n    },\r\n    comprender: {\r\n        height: '16.6%'\r\n    },\r\n    recordar: {\r\n        height: '16.6%'\r\n    },\r\n    active: {\r\n        boxShadow: '0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)',\r\n        backgroundColor: theme.palette.secondary.light,\r\n        color: 'white',\r\n    }\r\n}));\r\n\r\nexport const BloomPiramid = () => {\r\n    const classes = useStyles();\r\n    const { designState, dispatch } = useDesignState();\r\n    const active = designState.currentLearningResult.category;\r\n    const { bloomCategories } = designState;\r\n\r\n    const handleSelectOption = ( value ) => {\r\n        dispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'category',\r\n                value,\r\n            }\r\n        });\r\n    };\r\n\r\n    const createOptionList = () => {\r\n        return bloomCategories.map( option => {\r\n            const isActive = active === option._id;\r\n            return (\r\n                <div \r\n                    key={option._id}\r\n                    onClick={()=> handleSelectOption(isActive ? null : option._id)}\r\n                    className={`${classes.option} ${classes[option.name.toLowerCase()]} ${isActive && classes.active}`}\r\n                >\r\n                    { option.name }\r\n                </div>\r\n            );\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            { createOptionList() }\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { FormControlLabel, makeStyles, Radio } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    option: {\r\n        minWidth: '25%'\r\n    }\r\n}));\r\n\r\nexport const BloomVerbList = () => {\r\n    const classes = useStyles();\r\n    const { designState, dispatch } = useDesignState();\r\n    const category = designState.currentLearningResult.category;\r\n    const active = designState.currentLearningResult.verb;\r\n    const { bloomVerbs } = designState;\r\n    \r\n    const handleSelectOption = ( value ) => {\r\n        dispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'verb',\r\n                value,\r\n            }\r\n        });\r\n    };\r\n\r\n    const createOptionList = () => {\r\n        return bloomVerbs.filter((verb) => verb.category === category).map(option => {\r\n            const isActive = active === option.name;\r\n            return (\r\n            <FormControlLabel \r\n                className={classes.option}\r\n                key={option._id}\r\n                value={option.name}\r\n                control={<Radio\r\n                    checked={isActive}\r\n                    onChange={(e)=> handleSelectOption(option.name)}\r\n                    value={option.name}\r\n                />}\r\n                label={option.name}\r\n            />\r\n        )});\r\n    }\r\n    return (\r\n        <div className={classes.root}>\r\n            {createOptionList()}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Step, StepLabel, Stepper, TextField } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\nimport { BloomPiramid } from 'pages/DesignPage/Metadata/BloomPiramid';\r\nimport { BloomVerbList } from 'pages/DesignPage/Metadata/BloomVerbList';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    },\r\n    close: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    }\r\n}));\r\n\r\nexport const LearningResultModal = ({ design, isOpen }) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { designState, dispatch: designDispatch } = useDesignState();\r\n    const { dispatch: uiDispatch } = useUiState();\r\n    const { category, verb, editing, index } = designState.currentLearningResult;\r\n    const [ description, setDescription ] = useState(designState.currentLearningResult.description ?? '');\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const steps = ['Selecciona una categora de bloom', 'Selecciona un verbo', 'Proporciona una descripcin'];\r\n\r\n    useEffect(() => {\r\n        setDescription(designState.currentLearningResult.description);\r\n    }, [setDescription, designState.currentLearningResult.description]);\r\n\r\n    const handleNext = () => {\r\n        if(activeStep === 0 && category === null) return console.log('No ha seleccionado una categora de bloom.');\r\n        else if (activeStep === 1 && verb === '') return console.log('No ha seleccionado un verbo de bloom.');\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    const handleClose = (e) => {\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'LearningResult',\r\n        });\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        handleClose();\r\n        setActiveStep(0);\r\n        designDispatch({ type: types.design.clearCurrentLearningResult });\r\n    };\r\n\r\n    const handleFinish = () => {\r\n        if(description.trim() === '') return console.log('No se ha ingresado una descripcin.');\r\n        designDispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'description',\r\n                value: description,\r\n            }\r\n        });\r\n        if(!editing) socket.emit('add-learning-result', { designId: design._id, learningResult: { verb, description } });\r\n        else if (editing){\r\n            socket.emit('edit-learning-result', { designId: design._id, index, learningResult: { verb, description } });\r\n        }\r\n        handleCloseModal();\r\n    };\r\n\r\n    return (\r\n        <Dialog fullWidth open={isOpen} onClose={handleCloseModal} aria-labelledby=\"form-dialog-title\">\r\n            <div className={classes.title}>\r\n                <DialogTitle id=\"form-dialog-title\" onClose={handleCloseModal} >\r\n                    {\r\n                        !editing ? 'Nuevo resultado de aprendizaje' : 'Editar resultado de aprendizaje'\r\n                    }\r\n                </DialogTitle>\r\n                <IconButton className={classes.close} aria-label=\"close\" onClick={handleCloseModal}>\r\n                    <Close />\r\n                </IconButton>\r\n            </div>\r\n            <DialogContent>\r\n                <Stepper activeStep={activeStep} alternativeLabel>\r\n                    {steps.map((label) => (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                    ))}\r\n                </Stepper>\r\n                {\r\n                    (activeStep === 0)\r\n                        ? <BloomPiramid />\r\n                        : (activeStep === 1)\r\n                            ? <BloomVerbList />\r\n                            : <TextField\r\n                                multiline\r\n                                rows={6}\r\n                                variant=\"outlined\"\r\n                                name=\"description\"\r\n                                value={description ?? ''}\r\n                                onChange={({target})=> setDescription(target.value)}\r\n                                label=\"Descripcin\"\r\n                                type=\"text\"\r\n                                fullWidth\r\n                            />\r\n                }\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    disabled={activeStep === 0}\r\n                    onClick={handleBack}\r\n                >\r\n                    Volver\r\n                </Button>\r\n                {\r\n                    (activeStep === steps.length - 1)\r\n                        ? <Button variant=\"contained\" color=\"primary\" onClick={handleFinish}>\r\n                            Finalizar\r\n                        </Button>\r\n                        : <Button variant=\"contained\" color=\"primary\" onClick={handleNext}>\r\n                            Siguiente\r\n                        </Button>\r\n                }\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}","import React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\r\nimport { Button, Divider, FormControl, FormControlLabel, Grid, InputLabel, Link, makeStyles, MenuItem, Select, Switch, TextField, Typography } from '@material-ui/core'\r\nimport { useQuery } from 'react-query';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport TimeFormatter from 'utils/timeFormatters';\r\nimport { getCategories } from 'services/CategoryService';\r\nimport { LearningResult } from 'pages/DesignPage/Metadata/LearningResult';\r\nimport { LearningResultModal } from 'pages/DesignPage/Metadata/LearningResultModal';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingTop: 15,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 64px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    content: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between',\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    category: {\r\n        width: '100%',\r\n    },\r\n    categoryPopOver: {\r\n        maxHeight: 400,\r\n    },\r\n    timeField: {\r\n        marginRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    clickHere: {\r\n        textDecoration: 'none',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n}));\r\n\r\nexport const DesignMetadata = forwardRef((props, ref) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { authState } = useAuthState();\r\n    const isMounted = useRef(true);\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const nameRef = useRef();\r\n    const classSizeRef = useRef();\r\n    const hoursRef = useRef();\r\n    const minutesRef = useRef();\r\n    const priorKnowledgeRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const objectiveRef = useRef();\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        name: metadata.name,\r\n        category: metadata.category.name ?? 'Sin categora',\r\n        classSize: metadata.classSize,\r\n        workingTimeDesignHours: TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[0],\r\n        workingTimeDesignMinutes: TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[1],\r\n        workingTimeHours: metadata.workingTime.hours ?? 0,\r\n        workingTimeMinutes: metadata.workingTime.minutes ?? 0,\r\n        priorKnowledge: metadata.priorKnowledge,\r\n        description: metadata.description,\r\n        objective: metadata.objective,\r\n        isPublic: metadata.isPublic\r\n    });\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearEditors: () => {\r\n                nameRef?.current.clearText();\r\n                classSizeRef?.current.clearText();\r\n                hoursRef?.current.clearText();\r\n                minutesRef?.current.clearText();\r\n                priorKnowledgeRef?.current.clearText();\r\n                descriptionRef?.current.clearText();\r\n                objectiveRef?.current.clearText();\r\n            }\r\n        }),\r\n    );\r\n\r\n    useEffect(()=>{\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current){\r\n            if(form.category !== metadata.category.name){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    category: metadata.category.name ?? 'Sin categora',\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.category, form.category, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.name !== metadata.name){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    name: metadata.name,\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.name, form.name, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.classSize !== metadata.classSize){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    classSize: metadata.classSize,\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.classSize, form.classSize, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.description !== metadata.description){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    description: metadata.description,\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.description, form.description, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.workingTimeDesignHours !== TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[0]){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    workingTimeDesignHours: TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[0],\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.workingTimeDesign, form.workingTimeDesignHours, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.workingTimeDesignMinutes !== TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[1]){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    workingTimeDesignMinutes: TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[1],\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.workingTimeDesign, form.workingTimeDesignMinutes, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.workingTimeHours !== metadata.workingTime.hours){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    workingTimeHours: metadata.workingTime.hours ?? 0,\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.workingTime.hours, form.workingTimeHours, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.workingTimeMinutes !== metadata.workingTime.minutes){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    workingTimeMinutes: metadata.workingTime.minutes ?? 0,\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.workingTime.minutes, form.workingTimeMinutes, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.priorKnowledge !== metadata.priorKnowledge){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    priorKnowledge: metadata.priorKnowledge,\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.priorKnowledge, form.priorKnowledge, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.objective !== metadata.objective){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    objective: metadata.objective,\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.objective, form.objective, setValues]);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current){\r\n            if(form.isPublic !== metadata.isPublic){\r\n                setValues((prevState)=>({\r\n                    ...prevState,\r\n                    isPublic: metadata.isPublic,\r\n                }));\r\n            }\r\n        }\r\n    }, [metadata.isPublic, form.isPublic, setValues]);\r\n    \r\n    const { name, category, classSize, workingTimeDesignHours, workingTimeDesignMinutes, workingTimeHours, workingTimeMinutes, priorKnowledge, description, objective, isPublic } = form;\r\n    \r\n    const { isLoading, isError, data, error } = useQuery('categories', async () => {\r\n        return await getCategories();\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    if (isError) {\r\n        return (<Typography>{error.message}</Typography>);\r\n    }\r\n\r\n    if (isLoading) {\r\n        return (<Typography>Cargando...</Typography>);\r\n    }\r\n\r\n    const createCategoryList = () => {\r\n        if (data == null || data.categories.length === 0) return (<MenuItem value='Sin categora'>Sin categora</MenuItem>);\r\n        return data.categories.map(c => <MenuItem key={c._id} value={c.name}>{c.name}</MenuItem>);\r\n    };\r\n\r\n    const handleChangeMetadataField = ({target}) => {\r\n        let { name: field, value } = target;\r\n        value = (target.type === 'number' && !isNaN(target.value)) ? parseInt(target.value) : (target.type === 'checkbox') ? target.checked : target.value;\r\n        let e = { target: { name: target.name, value } };\r\n        let subfield = null;\r\n        switch (field) {\r\n            case 'workingTimeHours':\r\n                field = 'workingTime';\r\n                subfield = 'hours';\r\n                value = isNaN(value) ? 0 : value;\r\n                break;\r\n            case 'workingTimeMinutes':\r\n                field = 'workingTime';\r\n                subfield = 'minutes';\r\n                value = isNaN(value) ? 0 : value;\r\n                break;\r\n            case 'category':\r\n                value = data.categories.find(c => c.name === value);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        socket.emit('edit-metadata-field', { designId: design._id, field, value, subfield });\r\n        handleInputChange(e);\r\n    };\r\n\r\n    const handleSaveDesign = (e) => {\r\n        socket.emit('save-design', { designId: design._id });\r\n        enqueueSnackbar('Su diseo se ha guardado correctamente',  {variant: 'success', autoHideDuration: 2000});\r\n    };\r\n\r\n    const handleOpenLearningResultmodal = () => dispatch({\r\n        type: types.ui.toggleModal,\r\n        payload: 'LearningResult',\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Grid container key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}></Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div className={classes.title}>\r\n                        <Typography variant='h4'>Informacin Diseo</Typography>\r\n                        <Button variant='outlined' color='default' onClick={handleSaveDesign}>Guardar Informacin</Button>\r\n                    </div>\r\n                    <Divider />\r\n                    <Grid container spacing={3} className={classes.content}>\r\n                        \r\n                        <Grid item className={classes.grid} xs={12} sm={9}  >\r\n                            <SharedTextFieldTipTapEditor \r\n                                ref={nameRef}\r\n                                name='name' \r\n                                placeholder='Nombre'\r\n                                initialvalue={name}\r\n                                onChange={handleChangeMetadataField}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} sm={3}>\r\n                            <div>\r\n                                <Typography variant='body2'>Visibilidad</Typography>\r\n                                <FormControlLabel\r\n                                    control={<Switch \r\n                                        name='isPublic' \r\n                                        checked={isPublic} \r\n                                        onChange={handleChangeMetadataField} \r\n                                        disabled={!(design.owner === authState.user.uid)}\r\n                                    />}\r\n                                    label={isPublic ? 'Pblico' : 'Privado'}\r\n                                />\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <FormControl className={classes.category} variant='outlined' >\r\n                                <InputLabel id=\"category-label\">Categora</InputLabel>\r\n                                <Select\r\n                                    labelId=\"category-label\"\r\n                                    name='category'\r\n                                    label='Categora'\r\n                                    value={category}\r\n                                    onChange={handleChangeMetadataField}\r\n                                    MenuProps={{ classes: { paper: classes.categoryPopOver } }}\r\n                                >\r\n                                    {createCategoryList()}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <SharedTextFieldTipTapEditor \r\n                                ref={classSizeRef}\r\n                                name='classSize' \r\n                                placeholder='Tamao de la clase'\r\n                                initialvalue={classSize ?? 0}\r\n                                type=\"number\"\r\n                                min={0}\r\n                                onChange={handleChangeMetadataField}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <div style={{ width: '100%' }}>\r\n                                <Typography > Tiempo de trabajo </Typography>\r\n                                <div className={classes.timeField}>\r\n                                    <SharedTextFieldTipTapEditor \r\n                                        ref={hoursRef}\r\n                                        name='workingTimeHours' \r\n                                        placeholder='Horas'\r\n                                        initialvalue={workingTimeHours}\r\n                                        type=\"number\"\r\n                                        min={0}\r\n                                        onChange={handleChangeMetadataField}\r\n                                    />\r\n                                    <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                    <SharedTextFieldTipTapEditor \r\n                                        ref={minutesRef}\r\n                                        name='workingTimeMinutes' \r\n                                        placeholder='Minutos'\r\n                                        initialvalue={workingTimeMinutes}\r\n                                        type=\"number\"\r\n                                        min={0}\r\n                                        max={59}\r\n                                        onChange={handleChangeMetadataField}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <div style={{ width: '100%' }}>\r\n                                <Typography > Tiempo diseado </Typography>\r\n                                <div className={classes.timeField}>\r\n                                    <TextField\r\n                                        //margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        name=\"workingTimeDesignHours\"\r\n                                        value={workingTimeDesignHours}\r\n                                        label=\"Horas\"\r\n                                        type=\"number\"\r\n                                        disabled\r\n                                        fullWidth\r\n                                    />\r\n                                    <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                    <TextField\r\n                                        //margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        name=\"workingTimeDesignMinutes\"\r\n                                        value={workingTimeDesignMinutes}\r\n                                        label=\"Minutos\"\r\n                                        type=\"number\"\r\n                                        disabled\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12}>\r\n                            <SharedTextFieldTipTapEditor \r\n                                ref={descriptionRef}\r\n                                name='description' \r\n                                placeholder='Descripcin'\r\n                                initialvalue={description ?? ''}\r\n                                onChange={handleChangeMetadataField}\r\n                                rowMax={5}\r\n                                multiline\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <SharedTextFieldTipTapEditor \r\n                                ref={priorKnowledgeRef}\r\n                                name='priorKnowledge' \r\n                                placeholder='Conocimiento previo'\r\n                                initialvalue={priorKnowledge ?? ''}\r\n                                onChange={handleChangeMetadataField}\r\n                                rowMax={5}\r\n                                multiline\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <SharedTextFieldTipTapEditor \r\n                                ref={objectiveRef}\r\n                                name='objective' \r\n                                placeholder='Objetivos'\r\n                                initialvalue={objective ?? ''}\r\n                                onChange={handleChangeMetadataField}\r\n                                rowMax={5}\r\n                                multiline\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                    <div className={classes.title}>\r\n                        <Typography variant='h4'>Resultados de aprendizaje</Typography>\r\n                        <Button variant='outlined' color='default' onClick={handleOpenLearningResultmodal}>Agregar</Button>\r\n                    </div>\r\n                    <Divider />\r\n                    <div className={classes.content}>\r\n                        {\r\n                            metadata.results.length === 0\r\n                                ? <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                                    Este diseo an no tiene resultados de aprendizaje. Agrega el primer resultado de aprendizaje haciendo click {' '}\r\n                                    {<Link className={classes.clickHere} onClick={handleOpenLearningResultmodal}>aqu</Link>}\r\n                                    !\r\n                                </Alert>\r\n                                : metadata.results.map((result, index) => (\r\n                                    <LearningResult key={`learning-result-${index}`} index={index} {...result} />\r\n                                ))\r\n\r\n                        }\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid> \r\n            <LearningResultModal design={design} isOpen={uiState.isLearningResultModalOpen}/>\r\n        </>\r\n    )\r\n})\r\n","import PropTypes from 'prop-types';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport const TabPanel = ({ children, value, index, ...other }) => {\r\n    return (\r\n      <div\r\n        role=\"tabpanel\"\r\n        hidden={value !== index}\r\n        id={`full-width-tabpanel-${index}`}\r\n        aria-labelledby={`full-width-tab-${index}`}\r\n        {...other}\r\n      >\r\n        {value === index && (\r\n            <Typography component={'span'}>{children}</Typography>\r\n        )}\r\n      </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.any.isRequired,\r\n    value: PropTypes.any.isRequired,\r\n};\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getBloomCategories = async () => {\r\n    const resp = await fetchWithToken('bloom/category');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getBloomVerbs = async ( category ) => {\r\n    const resp = await fetchWithToken('bloom/verb', { category }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Grid, makeStyles, Avatar, Tabs, Tab, Typography } from '@material-ui/core';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { DesignWorkspace } from 'pages/DesignPage/Workspace/DesignWorkspace';\r\nimport { DesignMetadata } from 'pages/DesignPage/Metadata/DesignMetadata';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { getBloomCategories, getBloomVerbs } from 'services/BloomService';\r\nimport types from 'types';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useSharedDocContext } from 'contexts/SharedDocContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 64px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menu: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menuLetters: {\r\n        marginLeft: theme.spacing(2),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    menuLettersSelected: {\r\n        marginLeft: theme.spacing(2),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    tabBar: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    usersConnecteds: {\r\n        display: 'flex',\r\n    },\r\n    error: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: 20,\r\n        alignItems: 'start',\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const DesignPage = () => {\r\n    const classes = useStyles();\r\n    const isMounted = useRef(true);\r\n    const metadataRef = useRef();\r\n    const { id } = useParams();\r\n    const { doc, provider, connectToDesign, clearDoc } = useSharedDocContext();\r\n    const { authState } = useAuthState();\r\n    const { socket, online } = useSocketState();\r\n    const [ users, setUsersList ] = useState([]);\r\n    const [ tabIndex, setTabIndex ] = useState(0);\r\n    const { designState, dispatch } = useDesignState();\r\n    const { design } = designState;\r\n    const [error, setError] = useState(null);\r\n    \r\n    const prefetchBloomCategories = useCallback(async () => {\r\n        const data = await getBloomCategories();\r\n        dispatch({\r\n            type: types.design.setBloomCategories,\r\n            payload: data.bloomCategories,\r\n        });\r\n    }, [dispatch]);\r\n\r\n    const prefetchBloomVerbs = useCallback(async () => {\r\n        const data = await getBloomVerbs('');\r\n        dispatch({\r\n            type: types.design.setBloomVerbs,\r\n            payload: data.bloomVerbs,\r\n        });\r\n    }, [dispatch]);\r\n\r\n    useEffect(()=>{\r\n        prefetchBloomCategories();\r\n        prefetchBloomVerbs();\r\n    }, [prefetchBloomCategories, prefetchBloomVerbs]);\r\n    \r\n    useEffect(()=>{\r\n        let metadataComponent = metadataRef.current;\r\n        return () => {\r\n            metadataComponent?.clearEditors();\r\n            clearDoc();\r\n            isMounted.current = false;\r\n        };\r\n    }, [clearDoc]);\r\n\r\n    useEffect(() => {\r\n        if(online){\r\n            socket?.emit('join-to-design', { user: authState.user, designId: id }, (res) => {\r\n                if (res.ok){\r\n                    if(isMounted.current) {\r\n                        dispatch({\r\n                            type: types.design.updateDesign,\r\n                            payload: res.data.design\r\n                        });\r\n                        connectToDesign(id);\r\n                    }\r\n                } \r\n                else setError(res.message);\r\n            });\r\n        }\r\n    }, [socket, authState.user, online, id, dispatch, connectToDesign]);\r\n\r\n    useEffect(() => {\r\n        socket?.on('update-design', (design) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.updateDesign,\r\n                    payload: design\r\n                });\r\n            }\r\n        });\r\n        socket?.on('edit-metadata-field', ({ field, value, subfield }) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.changeMetadataField,\r\n                    payload: { field, value, subfield },\r\n                });\r\n            }\r\n        });\r\n        socket?.on('edit-task-field', ({ learningActivityIndex, index, field, value, subfield }) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.changeTaskField,\r\n                    payload: { learningActivityIndex, index, field, value, subfield },\r\n                });\r\n            }\r\n        });\r\n        socket?.on('users', (users) => {\r\n            if(isMounted.current) setUsersList(users);\r\n        });\r\n        socket?.on('change-design-privileges', (privileges) => {\r\n            dispatch({\r\n                type: types.design.setDesignPrivileges,\r\n                payload: privileges\r\n            });\r\n        });\r\n        return () => {\r\n            socket?.emit('leave-from-design', { user: authState.user, designId: id });\r\n            socket?.off('updateDesign');\r\n            socket?.off('edit-metadata-field');\r\n            socket?.off('edit-task-field');\r\n            socket?.off('users');\r\n        };\r\n    }, [socket, authState.user, id, dispatch]);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setTabIndex(newValue);\r\n    };\r\n    \r\n    if(error){\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    { error }\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!design || !doc || !provider) {\r\n        \r\n        return (<Typography>Cargando...</Typography>);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.menu} key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} />\r\n                <Grid item xs={12} md={6} lg={8} className={classes.tabBar}>\r\n                    <Tabs\r\n                        value={tabIndex}\r\n                        onChange={handleChange}\r\n                        aria-label=\"full width tabs example\"\r\n                    >\r\n                        <Tab label=\"METADATA\" {...a11yProps(0)} />\r\n                        <Tab label=\"DISEO\" {...a11yProps(1)} />\r\n                    </Tabs>\r\n                    <div className={classes.usersConnecteds}>\r\n                        {\r\n                            users.map((user, index) =>\r\n                                <Avatar\r\n                                    key={user.uid + index}\r\n                                    alt={formatName(user.name, user.lastname)}\r\n                                    src={user.img ?? ''}\r\n                                >\r\n                                    {getUserInitials(user.name, user.lastname)}\r\n                                </Avatar>\r\n                            )\r\n                        }\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2}></Grid>\r\n            </Grid>\r\n            <TabPanel value={tabIndex} index={0}>\r\n                <DesignMetadata ref={metadataRef} />\r\n            </TabPanel>\r\n            <TabPanel value={tabIndex} index={1}>\r\n                <DesignWorkspace/>\r\n            </TabPanel>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Typography, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    titleMargin: {\r\n        margin: 'auto',\r\n    },\r\n    bodyMargin: {\r\n        marginLeft: theme.spacing(5),\r\n        marginRight: theme.spacing(5)\r\n    }\r\n}));\r\n\r\nexport const ConfirmationModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { type, args, actionMutation } = uiState.confirmModalData;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { socket } = useSocketState();\r\n    \r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: null,\r\n                args: null,\r\n                actionMutation: null,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n\r\n    const confirmResult = async () => {\r\n        if (type === 'diseo') {\r\n            await actionMutation.mutate(args);\r\n            enqueueSnackbar('Su diseo se ha eliminado', { variant: 'success', autoHideDuration: 2000 });\r\n        } else if (type === 'actividad') {\r\n            socket.emit('delete-learningActivity', args);\r\n            enqueueSnackbar('Su actividad se ha eliminado', { variant: 'success', autoHideDuration: 2000 });\r\n        } else if (type === 'tarea') {\r\n            socket.emit('delete-task', args);\r\n            enqueueSnackbar('Su tarea se ha eliminado', { variant: 'success', autoHideDuration: 2000 });\r\n        };\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n\r\n    const renderConfirmationModal = () => {\r\n        return (\r\n            <Dialog onClose={handleClose} open={uiState.isConfirmationModalOpen}>\r\n                <DialogTitle className={classes.titleMargin} >\r\n                    Ests seguro?\r\n                    </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers>\r\n                    <Typography>\r\n                        Ests realmente seguro de que deseas eliminar tu {type}? Este proceso no se podr deshacer luego de haber elegido la opcin de eliminar.\r\n                        </Typography>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                        </Button>\r\n                    <Button variant='contained' color='primary' onClick={confirmResult}>\r\n                        Eliminar\r\n                        </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                renderConfirmationModal()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport { LandingPage } from 'pages/LandingPage/LandingPage';\r\nimport { PublicRoute } from 'router/PublicRoute';\r\nimport { PrivateRoute } from 'router/PrivateRoute';\r\nimport { MyDesignsPage } from 'pages/Navigation/MyDesigns/MyDesignsPage';\r\nimport { UserProfile } from 'pages/User/UserProfile/UserProfile';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { NavBar } from 'components/NavBar';\r\nimport { UserConfigProvider} from 'contexts/UserConfigContext';\r\nimport { Footer } from 'components/Footer';\r\nimport { CssBaseline, Grow } from '@material-ui/core';\r\nimport { SharedWithMePage } from 'pages/Navigation/SharedWithMe/SharedWithMePage';\r\nimport { PublicRepositoryPage } from 'pages/Navigation/PublicRepository/PublicRepositoryPage';\r\nimport { SearchUsersPage } from 'pages/User/SearchUsersPage/SearchUsersPage';\r\nimport { DesignPage } from 'pages/DesignPage/DesignPage';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { ConfirmationModal } from 'components/ConfirmationModal';\r\n\r\nexport const AppRouter = () => {\r\n    const { authState, verifyToken } = useAuthState();\r\n    const { token, checking } = authState;\r\n\r\n    useEffect(() => {\r\n        verifyToken();\r\n    }, [verifyToken]);\r\n\r\n    if (checking) {\r\n        return <h1>Espere...</h1>;\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <div>\r\n                <UserConfigProvider>\r\n                    <CssBaseline/>\r\n                    <NavBar />\r\n                    <SnackbarProvider maxSnack={3} anchorOrigin={{vertical: 'bottom',horizontal: 'left',}} TransitionComponent={Grow}>\r\n                        <Switch>\r\n                            <PublicRoute exact path=\"/\" component={ LandingPage } isAuthenticated={!checking && !!token }/>\r\n                            <PrivateRoute exact path=\"/profile/:uid\" component={ UserProfile } isAuthenticated={ !checking && !!token }/>\r\n                            <PrivateRoute exact path=\"/my-designs\" component={MyDesignsPage} isAuthenticated={!checking && !!token }/>\r\n                            <PrivateRoute path=\"/my-designs/:urlPath+/\" component={MyDesignsPage} isAuthenticated={!checking && !!token }/>\r\n                            <PrivateRoute exact path=\"/shared-with-me\" component={SharedWithMePage} isAuthenticated={!checking && !!token }/>\r\n                            <PrivateRoute exact path=\"/public-repository\" component={PublicRepositoryPage} isAuthenticated={!checking && !!token }/>\r\n                            <PrivateRoute exact path=\"/users/search\" component={SearchUsersPage} isAuthenticated={!checking && !!token }/>\r\n                            <PrivateRoute exact path=\"/designs/:id\" component={DesignPage} isAuthenticated={!checking && !!token }/>\r\n                            <Redirect to=\"/\" />\r\n                        </Switch>\r\n                        <ConfirmationModal />\r\n                    </SnackbarProvider>\r\n                    <Footer />\r\n                </UserConfigProvider>\r\n            </div>\r\n        </Router>\r\n    );\r\n};\r\n","import 'devextreme/dist/css/dx.common.css';\r\nimport 'devextreme/dist/css/dx.light.css';\r\nimport { QueryClient, QueryClientProvider } from \"react-query\";\r\n\r\nimport { AuthProvider } from \"contexts/AuthContext\";\r\nimport { SocketProvider } from \"contexts/SocketContext\";\r\nimport { UiProvider } from \"contexts/ui/UiContext\";\r\nimport { AppRouter } from \"router/AppRouter\";\r\nimport { DesignProvider } from \"contexts/design/DesignContext\";\r\nimport { SharedDocProvider } from \"contexts/SharedDocContext\";\r\n\r\nconst queryClient = new QueryClient()\r\n\r\nfunction LearningActivityDesigner() {\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            <UiProvider>\r\n                <AuthProvider>\r\n                    <DesignProvider>\r\n                        <SocketProvider>\r\n                            <SharedDocProvider>\r\n                                <AppRouter />\r\n                            </SharedDocProvider>\r\n                        </SocketProvider>\r\n                    </DesignProvider>\r\n                </AuthProvider>\r\n            </UiProvider>\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n\r\nexport default LearningActivityDesigner;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport LearningActivityDesigner from './App';\r\n\r\nReactDOM.render(\r\n    <LearningActivityDesigner />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}